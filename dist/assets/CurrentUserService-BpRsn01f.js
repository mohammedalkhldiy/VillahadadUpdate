class t{constructor(){this.currentUser=null,this.STORAGE_KEY="villahadad_current_user"}setCurrentUser(e){this.currentUser=e,typeof window<"u"&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}getCurrentUser(){if(!this.currentUser&&typeof window<"u"){const e=localStorage.getItem(this.STORAGE_KEY);if(e)try{this.currentUser=JSON.parse(e)}catch(r){console.error("Failed to parse stored user:",r),this.currentUser=null}}return this.currentUser}getFullName(){const e=this.getCurrentUser();return e?`${e.roleLabel} ${e.name}`:"مستخدم غير معروف"}getName(){const e=this.getCurrentUser();return(e==null?void 0:e.name)||"غير معروف"}getRoleLabel(){const e=this.getCurrentUser();return(e==null?void 0:e.roleLabel)||"غير محدد"}clearCurrentUser(){this.currentUser=null,typeof window<"u"&&localStorage.removeItem(this.STORAGE_KEY)}isLoggedIn(){return this.getCurrentUser()!==null}}const n=new t;export{n as CurrentUserService};
