import{r as h,j as e}from"./vendor-react-Ce27NbrU.js";import{s as f,U as x,p as xe,D as ge}from"./index-BFvmHygk.js";import{R as Z}from"./ReceptionWidgetCard-DgiBK5ow.js";import{U as he,b9 as U,b2 as me,aT as pe,D as ee,aF as fe,aq as ue,F as we,c as ye,be as ve,a as B,m as z,bM as je,bN as Ne,aj as ke,L as te,af as ae,P as Ee,d as Ae,O as $e,X as _e,_ as De,av as Ie}from"./vendor-ui-TjLGESBy.js";import"./vendor-supabase-CSCOup90.js";import"./vendor-utils-DKqDJWuS.js";class Se{async getTasks(){const n=new Date;n.setDate(n.getDate()-60);const i=new Date;i.setDate(i.getDate()-7);const{data:a,error:o}=await f.from("tasks").select("*").gte("created_at",n.toISOString()).order("created_at",{ascending:!1});if(o)return console.error("Error fetching tasks:",o),[];const d=new Date;return d.setHours(0,0,0,0),a.filter(g=>!g.completed||!g.completed_at?!0:new Date(g.completed_at)>=d).map(g=>({id:g.id,text:g.text,assignee:g.assignee,targetRole:g.target_role,completed:g.completed,completedAt:g.completed_at,completedBy:g.completed_by,createdAt:g.created_at,createdBy:g.created_by}))}async addTask(n,i,a,o){const{data:d,error:m}=await f.from("tasks").insert({text:n,assignee:i,target_role:a,completed:!1,created_by:o,created_at:new Date().toISOString()}).select().single();if(m)throw console.error("Error adding task:",m),m;return{id:d.id,text:d.text,assignee:d.assignee,targetRole:d.target_role,completed:d.completed,createdAt:d.created_at}}async toggleTask(n,i,a){const o={completed:i};i?(o.completed_at=new Date().toISOString(),o.completed_by=a):(o.completed_at=null,o.completed_by=null);const{error:d}=await f.from("tasks").update(o).eq("id",n);d&&console.error("Error toggling task:",d)}async deleteTask(n){const{error:i}=await f.from("tasks").delete().eq("id",n);i&&console.error("Error deleting task:",i)}async updateTask(n,i){const{error:a}=await f.from("tasks").update({text:i}).eq("id",n);a&&console.error("Error updating task:",a)}subscribe(n){return this.channel=f.channel("tasks-list").on("postgres_changes",{event:"*",schema:"public",table:"tasks"},i=>{n(i)}).subscribe(),()=>{this.channel&&f.removeChannel(this.channel)}}}const w=new Se;class Ce{async sendMessage(n,i,a,o="text"){const d={content:n,sender_id:i.id,sender_name:i.name,sender_role:i.role,recipient_id:a||null,type:o,created_at:new Date().toISOString(),is_read:!1},{data:m,error:g}=await f.from("messages").insert(d).select().single();if(g)throw console.error("Error sending message:",g),g;return m}subscribe(n){return this.channel=f.channel("chat-room").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},i=>{const a=i.new;n({id:a.id,content:a.content,senderId:a.sender_id,senderName:a.sender_name,senderRole:a.sender_role,recipientId:a.recipient_id,type:a.type,createdAt:a.created_at,isRead:a.is_read})}).subscribe(),()=>{this.channel&&f.removeChannel(this.channel)}}async getRecentMessages(n=100){const i=new Date;i.setDate(i.getDate()-1);const{data:a,error:o}=await f.from("messages").select("*").gte("created_at",i.toISOString()).order("created_at",{ascending:!1}).limit(n);return o?(console.error("Error fetching messages:",o),[]):a.reverse().map(d=>({id:d.id,content:d.content,senderId:d.sender_id,senderName:d.sender_name,senderRole:d.sender_role,recipientId:d.recipient_id,type:d.type,createdAt:d.created_at,isRead:d.is_read}))}}const I=new Ce,k=[{label:"Ø¹Ø§Ù… (Ù„Ù„Ø¬Ù…ÙŠØ¹)",value:"all"},{label:"Ù…Ø¯ÙŠØ±",value:x.MANAGER},{label:"Ø£Ø¯Ù…Ù†",value:x.ADMIN},{label:"Ø§Ø³ØªÙ‚Ø¨Ø§Ù„",value:x.RECEPTION},{label:"Ù…ØµÙˆØ±",value:x.PHOTO_EDITOR},{label:"Ù…ÙˆÙ†ØªÙŠØ±",value:x.VIDEO_EDITOR},{label:"Ø·Ø§Ø¨Ø¹Ø©",value:x.PRINTER}],Te=["ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… âœ…","Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡Ø§ ðŸ‘¨â€ðŸ’»","Ø¹Ø§Ø´Øª Ø§Ù„Ø£ÙŠØ§Ø¯ÙŠ ðŸ‘","Ø£ÙˆÙƒØŒ ØªÙ… ðŸ‘","Ù…Ù…ÙƒÙ† ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø±ØŸ ðŸ¤”","Ø£Ù†Ø§ ÙÙŠ Ø§Ø³ØªØ±Ø§Ø­Ø© â˜•ï¸","ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…Ù‡Ù…Ø© ðŸŽ‰"],Re=["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ˜Ž","ðŸ¤”","ðŸ˜…","ðŸ˜­","ðŸ˜¡","ðŸ‘","ðŸ‘Ž","ðŸ‘","ðŸ™Œ","ðŸ¤","ðŸ’ª","ðŸ™","ðŸ‘‹","ðŸŽ‰","ðŸ”¥","â¤ï¸","âœ…","âŒ","ðŸ“·","ðŸŽ¥","ðŸ’»"],Le=({currentUser:r,users:n=[]})=>{const i=(r==null?void 0:r.role)===x.ADMIN,a=(r==null?void 0:r.role)===x.MANAGER,o=(r==null?void 0:r.role)===x.PHOTO_EDITOR||(r==null?void 0:r.role)===x.VIDEO_EDITOR,d=!1,m=(r==null?void 0:r.role)===x.RECEPTION,g=()=>r?r.role===x.ADMIN?k.filter(t=>t.value!==x.MANAGER&&t.value!==x.ADMIN):r.role===x.MANAGER?k.filter(t=>t.value!==x.MANAGER):k:k,[b,O]=h.useState(null),[E,A]=h.useState([]),[$,S]=h.useState(""),[y,v]=h.useState([]),[F,P]=h.useState(!1),[G,re]=h.useState([]),q=h.useRef(null),V=h.useRef(null);h.useEffect(()=>{const t=xe.subscribe(l=>{re(l)}),s=I.subscribe(l=>{A(p=>{if(p.some(u=>u.id===l.id))return p;const N=p.findIndex(u=>u.senderId===l.senderId&&u.content===l.content&&u.recipientId===l.recipientId&&Math.abs(new Date(u.createdAt).getTime()-new Date(l.createdAt).getTime())<5e3);if(N!==-1){const u=[...p];return u[N]=l,u}return[...p,l]})});I.getRecentMessages().then(l=>{A(l)}),w.getTasks().then(v);const c=w.subscribe(l=>{console.log("Task update:",l),w.getTasks().then(v)});return()=>{t(),s(),c()}},[]);const[C,W]=h.useState(!1),[_,H]=h.useState(""),[T,K]=h.useState("all"),[D,J]=h.useState("tasks"),[oe,L]=h.useState(null),[R,M]=h.useState(""),se=async t=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ")&&(v(y.filter(s=>s.id!==t)),await w.deleteTask(t))},ie=t=>{L(t.id),M(t.text)},X=async t=>{R.trim()&&(v(y.map(s=>s.id===t?{...s,text:R}:s)),L(null),M(""),await w.updateTask(t,R))},Q=()=>{L(null),M("")},de=async t=>{var p;if(t.preventDefault(),!_.trim())return;const s=((p=k.find(N=>N.value===T))==null?void 0:p.label)||"Ø§Ù„ÙƒÙ„",l={id:Date.now().toString(),text:_,assignee:s,targetRole:T,completed:!1,createdAt:new Date().toISOString()};v([l,...y]),H(""),K("all"),W(!1);try{await w.addTask(_,s,T,r==null?void 0:r.id)}catch(N){console.error("Failed to add task",N)}},j=n.find(t=>t.id===b),le=()=>{var t;(t=q.current)==null||t.scrollIntoView({behavior:"smooth"})};h.useEffect(()=>{le()},[E,b]);const Y=async t=>{if(t.preventDefault(),!(!$.trim()||!r))try{const c={id:Date.now().toString(),content:$,senderId:r.id,senderName:r.name,senderRole:r.role,recipientId:b||null,type:"text",createdAt:new Date().toISOString(),isRead:!1};A([...E,c]),S(""),P(!1),await I.sendMessage(c.content,r,b)}catch(s){console.error("Failed to send message:",s)}},ne=async t=>{const s=y.find(c=>c.id===t);s&&(v(y.map(c=>c.id===t?{...c,completed:!c.completed}:c)),await w.toggleTask(t,!s.completed,r==null?void 0:r.id))},be=t=>{S(s=>s+t)},ce=E.filter(t=>b?t.senderId===(r==null?void 0:r.id)&&t.recipientId===b||t.senderId===b&&t.recipientId===(r==null?void 0:r.id):!t.recipientId);return e.jsx(ge,{isReception:m,allowOverflow:!0,hideBackground:a||d,noPadding:!0,children:e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in duration-300",children:[e.jsx("input",{type:"file",ref:V,className:"hidden",onChange:async t=>{var c;const s=(c=t.target.files)==null?void 0:c[0];if(s&&r){const p={id:Date.now().toString(),content:`ðŸ“Ž ${s.name}`,senderId:r.id,senderName:r.name,senderRole:r.role,recipientId:b||null,type:s.type.startsWith("image/")?"image":"file",createdAt:new Date().toISOString(),isRead:!1};A([...E,p]),await I.sendMessage(p.content,r,b,p.type)}}}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row min-h-0 overflow-visible gap-4",children:[e.jsxs(Z,{className:`flex-1 relative flex flex-col transition-all overflow-hidden ${a?"bg-white dark:bg-[#1a1c22] shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-gray-100 dark:border-white/5":i?"bg-[#14161c]/60 backdrop-blur-xl shadow-inner border border-white/5":o?"bg-[#1E1E1E] border border-[#3E3E42] shadow-none":m?"shadow-2xl border-none":"shadow-2xl"}`,rounded:a?"rounded-[2.5rem]":o?"rounded-sm":m?"rounded-[3rem]":"rounded-4xl",noPadding:!0,children:[e.jsxs("div",{className:`relative shrink-0 overflow-hidden ${a?"rounded-t-[2.5rem] bg-white/40 dark:bg-white/5 border-b border-white/20 dark:border-white/5":i?"rounded-t-4xl bg-white/5 border-b border-white/5":o?"bg-[#252526] border-b border-[#3E3E42]":m?"rounded-t-[3rem]":"rounded-t-xl"}`,children:[!a&&!o&&!d&&e.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-[#2a2d36] via-[#21242b] to-[#1a1c22]"}),!a&&e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] brightness-100 contrast-150"}),e.jsxs("div",{className:`relative z-10 flex items-center justify-between ${o?"px-3 py-2":"px-6 py-5"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`relative group ${o?"hidden":""}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-xl blur-lg opacity-40 ${a?"bg-amber-400":i?"bg-[#ff6d00]":o?"bg-blue-600":b?"bg-pink-500":"bg-blue-500"}`}),e.jsx("div",{className:`relative p-2.5 rounded-xl border ${a?"bg-white shadow-md border-white/60 text-amber-500":i?"bg-[#ff6d00]/10 border-[#ff6d00]/20 text-[#ff6d00] shadow-[0_0_15px_rgba(255,109,0,0.2)]":o?"bg-[#3E3E42] text-gray-300":"border-white/10 shadow-xl bg-linear-to-br"} flex items-center justify-center transition-all duration-300
                              ${!a&&!i&&!o&&!d?b?"from-pink-500/20 to-pink-900/40 text-pink-500":"from-blue-500/20 to-blue-900/40 text-blue-500":""} group-hover:scale-105`,children:b?e.jsx(he,{size:20}):e.jsx(U,{size:20})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h3",{className:`text-lg font-bold ${a?"text-gray-800 dark:text-white":o?"text-[#D4D4D4] text-sm":"text-white"} tracking-normal flex items-center gap-2`,children:[o&&e.jsx("span",{className:"text-blue-500 font-black",children:"#"}),b?j==null?void 0:j.name:"Team Chat",!b&&e.jsx("span",{className:`px-1 rounded-sm ${a?"bg-amber-50 dark:bg-amber-900/30 border-amber-100 dark:border-amber-500/20 text-amber-600 dark:text-amber-500":i?"bg-[#ff6d00]/10 border border-[#ff6d00]/30 text-[#ff6d00]":o?"bg-[#3E3E42] text-[#AAAAAA] text-[10px]":"bg-white/5 border border-white/10 text-gray-400"} text-[10px] font-normal`,children:"All"})]}),!o&&e.jsxs("p",{className:`text-[11px] ${a||d?"text-gray-500 dark:text-gray-400":"text-gray-400"} font-medium flex items-center gap-1.5`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full shadow-[0_0_8px_currentColor] ${a?"bg-emerald-500 text-emerald-500":b?"bg-green-500 text-green-500":"bg-blue-500 text-blue-500 animate-pulse"}`}),b?"Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†":`${G.length>0?G.length:1} Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[b&&e.jsxs("button",{onClick:()=>O(null),className:`p-2 rounded-lg ${a||d?"bg-gray-100/50 text-gray-500 hover:bg-white hover:text-amber-500 border border-gray-200/50":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 border border-white/5"} transition-all flex items-center gap-2 text-[10px] font-bold`,children:[e.jsx(me,{size:12})," Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¹Ø§Ù…Ø©"]}),e.jsx("button",{className:`p-2 rounded-lg ${a?"bg-gray-100/50 text-gray-400 hover:text-amber-500 hover:bg-white":"bg-black/20 text-gray-400 hover:text-white hover:bg-white/5"} border border-transparent hover:border-white/10 transition-all`,children:e.jsx(pe,{size:18})})]})]})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto ${o?"p-2 space-y-2":"p-4 space-y-4"} custom-scrollbar ${a?"bg-white/30 dark:bg-black/20":i?"bg-transparent":o?"bg-[#1E1E1E]":"bg-[#1a1c22]/50"}`,children:[ce.map(t=>{const s=t.senderId===(r==null?void 0:r.id),c=new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} group animate-in slide-in-from-bottom-2 duration-300`,children:e.jsxs("div",{className:`flex flex-col max-w-[80%] ${s?"items-end":"items-start"}`,children:[!b&&!s&&e.jsxs("span",{className:`text-[10px] font-bold mb-1 px-1 ${a?"text-gray-500 dark:text-gray-400":"text-gray-400"}`,children:[t.senderName,e.jsxs("span",{className:"opacity-50 font-normal mx-1",children:["(",t.senderRole,")"]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[!s&&e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0 shadow-sm ${a?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-500":"bg-pink-500 text-white"}`,children:t.senderName.charAt(0)}),e.jsx("div",{className:`px-4 py-2.5 shadow-sm backdrop-blur-md transition-all duration-300 ${s?a?"bg-amber-500 text-white rounded-[20px] rounded-tr-none shadow-amber-500/20":i?"bg-linear-to-br from-[#ff6d00] to-primary-dark text-white rounded-[20px] rounded-tr-none shadow-lg shadow-[#ff6d00]/20":o?"bg-[#3577EF] text-white rounded-sm":m?"bg-pink-600 text-white rounded-4xl rounded-tr-none":"bg-linear-to-br from-blue-600 to-indigo-700 text-white rounded-[20px] rounded-tr-none":a?"bg-white dark:bg-white/5 text-gray-700 dark:text-gray-200 border border-gray-100 dark:border-white/5 rounded-[20px] rounded-tl-none shadow-sm":i?"bg-background-subtle text-gray-200 border border-white/5 rounded-[20px] rounded-tl-none shadow-sm":o?"bg-[#333333] text-[#CCCCCC] rounded-sm":m?"bg-[#2a2d36] text-white rounded-4xl rounded-tl-none":"bg-[#18181b] text-gray-200 rounded-[20px] rounded-tl-none border border-white/5 hover:border-white/10"}`,children:t.type==="image"?e.jsxs("div",{className:"space-y-2 max-w-[280px]",children:[e.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/10 shadow-2xl group/img relative",children:[e.jsx("img",{src:t.content||"https://images.unsplash.com/photo-1542038784456-1ea8e935640e?auto=format&fit=crop&q=80&w=400",alt:"Media",className:"w-full object-cover group-hover/img:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(ee,{size:20,className:"text-white"})})]}),t.content&&!t.content.startsWith("http")&&e.jsx("p",{className:"text-sm font-medium",children:t.content})]}):t.type==="audio"?e.jsxs("div",{className:"flex items-center gap-3 min-w-[220px] py-1",children:[e.jsx("button",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 transition-all ${s?"bg-white/20 hover:bg-white/30":"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400"}`,children:e.jsx(fe,{size:18,fill:"currentColor"})}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx("div",{className:"flex gap-0.5 h-7 items-center",children:[...Array(18)].map((l,p)=>e.jsx("div",{className:`flex-1 rounded-full ${s?"bg-white/40":"bg-blue-500/40"}`,style:{height:`${20+Math.random()*80}%`}},p))}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold opacity-70 italic",children:[e.jsx("span",{children:"0:14"}),e.jsx(ue,{size:12})]})]})]}):t.type==="file"?e.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl border min-w-[240px] ${s?"bg-black/20 border-white/10":"bg-blue-500/5 border-blue-500/10"}`,children:[e.jsx("div",{className:`w-11 h-11 rounded-lg flex items-center justify-center shrink-0 ${s?"bg-white/10 text-white":"bg-blue-500/20 text-blue-400"}`,children:e.jsx(we,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-black truncate",children:t.content}),e.jsx("p",{className:"text-[10px] opacity-60 font-mono",children:"2.4 MB â€¢ PDF"})]}),e.jsx("a",{href:"#",className:`p-2 rounded-lg transition-all ${s?"hover:bg-white/10 text-white":"hover:bg-blue-500/20 text-blue-400"}`,onClick:l=>{l.preventDefault(),alert("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...")},children:e.jsx(ee,{size:18})})]}):t.content}),e.jsx("span",{className:`text-[9px] text-gray-600 font-mono mt-0.5 ${s?"text-left ml-1":"text-right mr-1"}`,children:c})]})]})},t.id)}),e.jsx("div",{ref:q})]}),e.jsxs("div",{className:`px-4 py-2 flex gap-2 overflow-x-auto no-scrollbar border-t ${a?"border-gray-100 dark:border-white/5 bg-white/40 dark:bg-[#1a1c22]":i?"border-white/5 bg-[#14161c]/30":o?"border-[#3E3E42] bg-[#252526]":"border-white/5 bg-[#21242b]"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 text-pink-500 shrink-0 opacity-70",children:[e.jsx(ye,{size:12}),e.jsx("span",{className:"text-[9px] font-bold",children:"Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª:"})]}),Te.map((t,s)=>e.jsx("button",{onClick:()=>S(t),className:`shrink-0 px-3 py-1.5 rounded-full ${a?"bg-white dark:bg-white/5 border-gray-200 dark:border-white/10 text-gray-500 dark:text-gray-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:text-amber-600 dark:hover:text-amber-500 hover:border-amber-200 dark:hover:border-amber-500/20":i?"bg-background-subtle border-white/10 text-gray-400 hover:bg-[#ff6d00]/10 hover:text-[#ff6d00] hover:border-[#ff6d00]/30":o?"bg-[#333333] border-[#3E3E42] text-[#CCCCCC] hover:bg-[#3E3E42] rounded-md":"bg-[#2a2d36] border border-white/10 text-gray-400 hover:bg-pink-500 hover:text-white hover:border-pink-500/50"} border text-[10px] transition-all whitespace-nowrap`,children:t},s))]}),e.jsx("div",{className:`p-3 border-t ${a?"border-gray-100 dark:border-white/5 bg-white/60 dark:bg-[#1a1c22]":i?"border-white/5 bg-[#14161c]/60":o?"border-[#3E3E42] bg-[#252526]":"border-white/5 bg-[#1a1c22]"} ${o?"rounded-none":"rounded-b-4xl"}`,children:e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx("textarea",{"data-testid":"chat-input",value:$,onChange:t=>S(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),Y(t))},placeholder:b?`Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ© Ø¥Ù„Ù‰ ${j==null?void 0:j.name}...`:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ ÙÙŠ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©...",rows:1,className:`w-full ${a?"bg-white dark:bg-[#1a1c22] border-gray-200 dark:border-white/10 text-gray-800 dark:text-white placeholder:text-gray-400 focus:border-amber-400 focus:ring-1 focus:ring-amber-200 dark:focus:ring-amber-500/20":i?"bg-background-subtle border-white/10 text-white placeholder:text-gray-600 focus:border-[#ff6d00] focus:shadow-lg":o?"bg-[#1E1E1E] border-[#3E3E42] text-[#CCCCCC] focus:border-[#3577EF] rounded-sm":"bg-black/20 border-white/10 text-white focus:border-pink-500"} border rounded-2xl px-4 py-3 outline-none transition-all text-sm shadow-inner min-h-[48px] resize-none`})}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>P(!F),className:`p-2.5 rounded-xl transition-all ${F?a?"bg-amber-500 text-white shadow-lg":"bg-pink-500 text-white shadow-lg":"text-gray-400 hover:text-gray-500 hover:bg-gray-100"}`,title:"Ø¥ÙŠÙ…ÙˆØ¬ÙŠ",children:e.jsx(ve,{size:22})}),e.jsx(B,{children:F&&e.jsx(z.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full right-0 mb-4 p-3 bg-[#1e1e1e] rounded-2xl border border-white/10 shadow-2xl grid grid-cols-6 gap-2 z-50 w-72 max-w-[90vw] cursor-default",onClick:t=>t.stopPropagation(),children:Re.map(t=>e.jsx("button",{type:"button",onClick:()=>{be(t),P(!1)},className:"p-2 hover:bg-white/10 rounded-lg text-xl transition-colors flex items-center justify-center",children:t},t))})})]}),e.jsx("button",{type:"button",onClick:async()=>{if(!r)return;const s={id:Date.now().toString(),content:"ðŸŽ¤ Ø±Ø³Ø§Ù„Ø© ØµÙˆØªÙŠØ©",senderId:r.id,senderName:r.name,senderRole:r.role,recipientId:b||null,type:"text",createdAt:new Date().toISOString(),isRead:!1};A([...E,s]),await I.sendMessage(s.content,r,b,"text")},className:"p-2.5 text-gray-400 hover:text-pink-500 hover:bg-pink-500/5 rounded-xl transition-all",title:"Ø¨ØµÙ…Ø© ØµÙˆØªÙŠØ©",children:e.jsx(je,{size:22})}),e.jsx("button",{type:"button",onClick:()=>{var t;return(t=V.current)==null?void 0:t.click()},className:"p-2.5 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition-all rotate-45",title:"Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù Ø£Ùˆ ØµÙˆØ±Ø©",children:e.jsx(Ne,{size:22})})]}),e.jsxs("button",{type:"submit","data-testid":"chat-send-btn",disabled:!$.trim(),className:`px-6 py-2 rounded-xl text-sm font-bold flex items-center gap-2 transition-all ${$.trim()?a?"bg-amber-500 text-white shadow-lg shadow-amber-500/20 active:scale-95":o?"bg-[#3577EF] text-white rounded-sm shadow-none":"bg-pink-600 text-white shadow-lg active:scale-95":a?"bg-gray-100 text-gray-400":o?"bg-[#3E3E42] text-[#666666] rounded-sm":"bg-white/5 text-gray-600"}`,children:[e.jsx("span",{children:"Ø¥Ø±Ø³Ø§Ù„"}),e.jsx(ke,{size:16})]})]})]})})]}),e.jsx("div",{className:`w-full lg:w-80 ${o?"border-l border-[#3E3E42]":""}`,children:e.jsxs(Z,{rounded:a?"rounded-[2.5rem]":o?"rounded-none":m?"rounded-[2.5rem]":"rounded-xl",className:`flex flex-col h-full overflow-visible! ${a?"bg-white dark:bg-[#1a1c22] shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-gray-100 dark:border-white/5":i?"bg-[#14161c]/60 backdrop-blur-xl border border-white/5 shadow-inner":o?"bg-[#1E1E1E] shadow-none border-t border-[#3E3E42]":""}`,noPadding:!0,children:[e.jsxs("div",{className:`flex border-b shrink-0 ${a?"bg-white/40 dark:bg-white/5 border-gray-100 dark:border-white/5":i?"bg-white/5 border-white/5":o?"bg-[#252526] border-[#3E3E42]":"bg-linear-to-r from-[#22242b] to-[#1e1e24] border-white/5"}`,children:[e.jsxs("button",{onClick:()=>J("tasks"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-4 transition-all duration-300 relative ${D==="tasks"?a?"text-amber-600 font-bold":o?"text-[#3577EF] font-bold":"text-orange-400 font-bold":a||d?"text-gray-400 hover:text-gray-600":o?"text-[#AAAAAA] hover:text-white":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx(te,{size:18}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„Ù…Ù‡Ø§Ù…"}),D==="tasks"&&e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-0.5 ${a?"bg-amber-500":o?"bg-[#3577EF]":"bg-orange-500"}`})]}),e.jsxs("button",{onClick:()=>J("members"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-4 transition-all duration-300 relative ${D==="members"?a?"text-amber-600 font-bold":o?"text-[#3577EF] font-bold":"text-blue-400 font-bold":a||d?"text-gray-400 hover:text-gray-600":o?"text-[#AAAAAA] hover:text-white":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx(ae,{size:18}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),D==="members"&&e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-0.5 ${a?"bg-amber-500":o?"bg-[#3577EF]":"bg-blue-500"}`})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 overflow-visible",children:e.jsx(B,{mode:"wait",children:D==="tasks"?e.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:`p-5 border-b relative z-20 shadow-sm ${a?"bg-white/40 dark:bg-[#1a1c22] border-gray-100 dark:border-white/5":i?"bg-white/5 border-white/5":o?"bg-[#252526] border-[#3E3E42]":"bg-linear-to-r from-[#22242b] to-[#1e1e24] border-white/5"}`,children:e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${a?"bg-amber-50 border border-amber-100":i?"bg-[#ff6d00]/10 border border-[#ff6d00]/30":o?"bg-[#1E1E1E] border-[#3E3E42]":"bg-linear-to-br from-orange-500/20 to-red-500/20 border border-white/10"} shadow-inner`,children:e.jsx(te,{size:16,className:a?"text-amber-500":i?"text-[#ff6d00]":o?"text-[#3577EF]":"text-orange-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-base font-bold ${a?"text-gray-800":o?"text-[#D4D4D4]":"text-white"}`,children:"Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ¹Ø©"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Todo List"})]})]}),((r==null?void 0:r.role)===x.MANAGER||(r==null?void 0:r.role)===x.ADMIN)&&e.jsxs("div",{className:"relative z-50",children:[e.jsx("button",{onClick:()=>W(!C),className:`p-2 rounded-lg border border-transparent hover:border-white/10 transition-all shadow-sm active:scale-95 ${C?a?"bg-amber-500 text-white shadow-amber-500/20":o?"bg-[#3577EF] text-white shadow-none":"bg-orange-500 text-white shadow-orange-500/20":a?"bg-gray-100 text-amber-500 hover:bg-white":o?"bg-[#3E3E42] text-[#3577EF] hover:text-white":"bg-black/20 hover:bg-white/5 text-orange-400"}`,children:e.jsx(Ee,{size:16,className:`transition-transform duration-300 ${C?"rotate-45":""}`})}),e.jsx(B,{children:C&&e.jsx(z.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:`absolute top-full left-0 mt-2 w-64 p-3 rounded-xl border shadow-2xl z-1000 origin-top-left
                                                                ${a?"bg-white dark:bg-[#1a1c22] border-gray-200 dark:border-white/10 shadow-xl":"bg-[#2a2d36] border-white/10"}`,children:e.jsxs("form",{onSubmit:de,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-[10px] font-bold mb-1 block ${a?"text-gray-600":"text-gray-400"}`,children:"Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("input",{autoFocus:!0,type:"text",value:_,onChange:t=>H(t.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©...",className:`w-full border rounded-lg px-3 py-2 text-xs outline-none transition-all shadow-inner
                                                                            ${a?"bg-gray-50 dark:bg-white/5 border-gray-200 dark:border-white/10 text-gray-800 dark:text-gray-200 focus:border-amber-400 focus:bg-white dark:focus:bg-black/20 placeholder:text-gray-400":"bg-[#18181b] border-white/10 text-white focus:border-orange-500 placeholder:text-gray-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-[10px] font-bold mb-1 block ${a?"text-gray-600":"text-gray-400"}`,children:"ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰"}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g().map(t=>e.jsx("button",{type:"button",onClick:()=>K(t.value),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all text-center border
                                                                                      ${T===t.value?a?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-500 border-amber-300 dark:border-amber-500/30":"bg-orange-500/20 text-orange-500 border-orange-500/30 font-bold":a?"bg-white dark:bg-white/5 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-white/10 border-gray-200 dark:border-white/10":"bg-[#18181b] text-gray-300 hover:bg-[#202025] border-white/5"}`,children:t.label},t.value))})]}),e.jsx("button",{type:"submit",disabled:!_.trim(),className:`w-full py-2 rounded-lg text-xs font-bold shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed
                                                                        ${a?"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20":"bg-linear-to-r from-orange-600 to-red-600 text-white hover:shadow-orange-500/20"}`,children:"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©"})]})})})]})]})}),e.jsx("div",{className:`flex-1 space-y-3 p-4 overflow-y-auto ${a?"[&::-webkit-scrollbar]:hidden -ms-overflow-style-none scrollbar-width-none":"custom-scrollbar"}`,children:y.filter(t=>(r==null?void 0:r.role)===x.MANAGER?!0:(r==null?void 0:r.role)===x.ADMIN?!t.targetRole||t.targetRole==="all"||t.targetRole===x.ADMIN||t.createdBy===r.id:!t.targetRole||t.targetRole==="all"?!0:t.targetRole===(r==null?void 0:r.role)).sort((t,s)=>Number(t.completed)-Number(s.completed)).map(t=>{var s,c;return e.jsxs("div",{onClick:()=>{(t.targetRole===(r==null?void 0:r.role)||t.targetRole==="all")&&ne(t.id)},className:`p-3 rounded-xl flex items-center gap-3 transition-all duration-300 relative group overflow-hidden shadow-lg hover:shadow-2xl hover:-translate-y-0.5 border border-white/5
                                                      ${t.targetRole===(r==null?void 0:r.role)||t.targetRole==="all"?"cursor-pointer":"cursor-default opacity-90"}
                                                      ${t.completed?a?"bg-emerald-50 dark:bg-emerald-900/10 opacity-60":"bg-linear-to-br from-green-900/10 to-emerald-900/20 opacity-70":a?"bg-white dark:bg-[#1a1c22] hover:bg-amber-50/50 dark:hover:bg-amber-500/5 hover:border-amber-200 dark:hover:border-amber-500/20":o?"bg-[#1E1E1E] border-[#3E3E42] hover:border-[#3577EF]":"bg-linear-to-br from-[#2a2d36] to-[#21242b] hover:from-blue-900/20 hover:to-purple-900/20 hover:border-blue-500/30"}
                                                  `,children:[!t.completed&&!o&&e.jsx("div",{className:`absolute inset-0 ${a?"bg-amber-400/5":"bg-blue-500/5"} opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl`}),e.jsx("div",{className:`h-6 w-6 rounded-lg flex items-center justify-center shrink-0 transition-all duration-300 shadow-inner relative z-10
                                                      ${t.completed?"bg-green-500/20 text-green-400 ring-1 ring-green-500/30":a?"bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 group-hover:border-amber-400 group-hover:shadow-[0_0_10px_rgba(245,158,11,0.2)]":o?"bg-[#252526] border-[#3E3E42] group-hover:border-[#3577EF]":"bg-black/40 border border-white/10 group-hover:border-blue-500/50 group-hover:shadow-[0_0_10px_rgba(59,130,246,0.2)]"}
                                                  `,children:t.completed&&e.jsx(Ae,{size:16,className:"text-green-400 drop-shadow-[0_0_5px_currentColor]"})}),e.jsx("div",{className:"flex-1 min-w-0 z-10",children:oe===t.id?e.jsxs("div",{className:"flex items-center gap-2",onClick:l=>l.stopPropagation(),children:[e.jsx("input",{autoFocus:!0,type:"text",value:R,onChange:l=>M(l.target.value),className:`w-full text-xs font-bold bg-transparent border-b ${a?"border-amber-400 text-gray-800":"border-white/20 text-white"} outline-none pb-1`,onKeyDown:l=>{l.key==="Enter"&&X(t.id),l.key==="Escape"&&Q()}}),e.jsx("button",{onClick:()=>X(t.id),className:"text-green-500 hover:text-green-400",children:e.jsx($e,{size:14})}),e.jsx("button",{onClick:Q,className:"text-red-500 hover:text-red-400",children:e.jsx(_e,{size:14})})]}):e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold truncate transition-all ${t.completed?"text-gray-500 line-through":a?"text-gray-800 dark:text-gray-200 group-hover:text-amber-700 dark:group-hover:text-amber-500":o?"text-gray-200 group-hover:text-[#3577EF]":"text-gray-100 group-hover:text-blue-200"}`,children:t.text}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full ${t.completed?a?"bg-gray-100 dark:bg-white/10 text-gray-500":"bg-white/5 text-gray-600":a?"bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 text-gray-500 dark:text-gray-400 group-hover:text-amber-600 dark:group-hover:text-amber-500 group-hover:border-amber-200 dark:group-hover:border-amber-500/30":o?"bg-[#252526] border-[#3E3E42] text-gray-400 group-hover:text-white":"bg-black/30 text-gray-400 border border-white/5 shadow-sm group-hover:border-blue-500/20 group-hover:text-blue-300"}`,children:t.assignee}),t.completed&&t.completedBy&&e.jsxs("span",{className:"text-[9px] text-emerald-600/70 opacity-0 group-hover:opacity-100 transition-opacity",children:["â€¢ ",((c=(s=n.find(l=>l.id===t.completedBy))==null?void 0:s.name)==null?void 0:c.split(" ")[0])||"Ù…Ø³ØªØ®Ø¯Ù…"," (",t.completedAt?new Date(t.completedAt).toLocaleDateString("en-US"):"",")"]})]})]}),((r==null?void 0:r.role)===x.MANAGER||(r==null?void 0:r.role)===x.ADMIN)&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>ie(t),className:`p-1.5 rounded-lg transition-colors ${a?"hover:bg-amber-100 text-gray-400 hover:text-amber-600":"hover:bg-white/10 text-gray-500 hover:text-blue-400"}`,children:e.jsx(De,{size:12})}),e.jsx("button",{onClick:()=>se(t.id),className:`p-1.5 rounded-lg transition-colors ${a?"hover:bg-red-50 text-gray-400 hover:text-red-500":"hover:bg-white/10 text-gray-500 hover:text-red-400"}`,children:e.jsx(Ie,{size:12})})]})]})})]},t.id)})})]},"tasks"):e.jsxs(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:`p-5 border-b shrink-0 ${a?"bg-white/40 border-gray-100":o?"bg-[#252526] border-[#3E3E42]":"bg-linear-to-r from-[#22242b] to-[#1e1e24] border-white/5"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${a?"bg-amber-50 border border-amber-100":o?"bg-[#1E1E1E] border-[#3E3E42]":"bg-linear-to-br from-blue-500/20 to-purple-500/20 border border-white/10"} shadow-inner`,children:e.jsx(ae,{size:16,className:a?"text-amber-500":o?"text-[#3577EF]":"text-blue-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-base font-bold ${a?"text-gray-800":o?"text-[#D4D4D4]":"text-white"}`,children:"Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Team Members"})]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${a?"bg-amber-100 text-amber-600":"bg-white/10 text-gray-300"}`,children:n.length})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar",children:[e.jsxs("button",{onClick:()=>O(null),className:`w-full p-2 rounded-xl flex items-center gap-3 transition-all duration-300 border ${b===null?a?"bg-amber-50 border-amber-100":o?"bg-[#3577EF]/10 border-[#3577EF] text-white":"bg-linear-to-r from-blue-600/20 to-purple-600/20 border-blue-500/30":a?"bg-transparent border-transparent hover:bg-gray-50":o?"bg-transparent hover:bg-[#2A2A2A]":"bg-transparent border-transparent hover:bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${b===null?"bg-linear-to-br from-blue-500 to-indigo-600 text-white shadow-lg":"bg-gray-700/50 text-gray-400"}`,children:e.jsx(U,{size:20})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`text-sm font-bold ${a?"text-gray-800":o?"text-[#D4D4D4]":"text-white"}`,children:"Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Join the discussion"})]})]}),e.jsx("div",{className:`h-px w-full my-2 ${a?"bg-gray-200":"bg-white/5"}`}),(n||[]).filter(t=>t.id!==(r==null?void 0:r.id)).map(t=>{var s;return e.jsxs("button",{onClick:()=>O(t.id),className:`w-full p-2 rounded-xl flex items-center gap-3 transition-all duration-300 border group ${b===t.id?a?"bg-amber-50 border-amber-100":o?"bg-[#3577EF]/10 border-[#3577EF]":"bg-linear-to-r from-pink-600/20 to-rose-600/20 border-pink-500/30":a?"bg-transparent border-transparent hover:bg-gray-50":o?"bg-transparent border-transparent hover:bg-[#2A2A2A]":"bg-transparent border-transparent hover:bg-white/5"}`,children:[e.jsxs("div",{className:"relative",children:[t.avatar&&(t.avatar.startsWith("bg-")||t.avatar.includes("gradient"))?e.jsx("div",{className:`w-10 h-10 rounded-full ${t.avatar} flex items-center justify-center text-white text-xs font-bold shadow-md`,children:t.name.charAt(0)}):e.jsx("img",{src:t.avatar||"https://i.pravatar.cc/150",alt:t.name,className:"w-10 h-10 rounded-full object-cover shadow-sm"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-[#1a1c22] bg-emerald-500 shadow-sm"})]}),e.jsxs("div",{className:"flex-1 text-right min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[e.jsx("p",{className:`text-sm font-bold truncate ${a?"text-gray-800":o?"text-[#D4D4D4]":"text-white"}`,children:t.name}),G.find(c=>c.id===t.id)&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_5px_currentColor]",title:"Online"})]}),e.jsxs("p",{className:"text-[10px] text-gray-500 truncate text-right flex items-center gap-1 justify-end",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a?"bg-amber-400":"bg-pink-500"}`}),((s=k.find(c=>c.value===t.role))==null?void 0:s.label)||t.role]})]})]},t.id)})]})]},"members")})})]})})]})]})})};export{Le as default};
