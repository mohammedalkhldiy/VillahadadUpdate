import{r as x,j as e}from"./vendor-react-Ce27NbrU.js";import{S as le,B as A,k as Se,l as c,m as Me,n as m,o as y,q as Te,r as Ee,v as Pe,t as S}from"./index-BFvmHygk.js";import{C as De}from"./ClientBadge-BDLI63ku.js";import{V as $e,ba as ce,v as N,y as v,af as Oe,a1 as M,w as de,H as T,ae as Re,r as ie,$ as ne,aK as He,a0 as Fe,E as Le,P as xe,bb as Be,K as Ke,c as We,ap as oe,bc as me,bd as Ge,aw as Ue,az as Ve,a2 as p,N as E,B as pe,O as be,be as _e,bf as qe,bg as Qe,C as Ye}from"./vendor-ui-TjLGESBy.js";import{f as P,p as D,a as $}from"./vendor-utils-DKqDJWuS.js";import"./vendor-supabase-CSCOup90.js";const ls=({booking:s,reminders:t,onBack:r,allBookings:d=[],initialTab:b,onUpdateBooking:i})=>{var F,L,B,K,W,G,U,V,_,q,Q,Y,J,X,Z,k,ee,se,ae;const[n,he]=x.useState(b||"client"),[Je,Xe]=x.useState(null),[je,O]=x.useState(!1),[ge,fe]=x.useState(0),[ye,R]=x.useState(!1),[Ne,h]=x.useState(!1),ve=s.servicePackage.includes("خارجي")||((F=s.details)==null?void 0:F.weather)!==void 0,H={id:"current-user",name:"المستخدم الحالي"},we=a=>{const l=String(a||"").split("").reduce((f,z)=>f+z.charCodeAt(0),0)%3;return l===0?{label:"سعيد جداً",color:"text-emerald-600",bg:"bg-emerald-50",icon:_e,borderColor:"border-emerald-100"}:l===1?{label:"محايد",color:"text-amber-600",bg:"bg-amber-50",icon:qe,borderColor:"border-amber-100"}:{label:"عميل حساس",color:"text-rose-600",bg:"bg-rose-50",icon:Qe,borderColor:"border-rose-100"}},Ce=(a,l,f)=>{var re;if(!i){S.error("لا يمكن تحديث الحجز في وضع العرض فقط");return}const z=((re=s.details)==null?void 0:re.extraItems)||[],ze={id:Date.now().toString(),amount:a,currency:f,description:l},te=[...z,ze];if(s.currency===f)i(s.id,{totalAmount:s.totalAmount+a,paidAmount:s.paidAmount+a,details:{...s.details,extraItems:te}});else{const Ae=s.addOnTotal||0;i(s.id,{addOnTotal:Ae+a,originalPackagePrice:s.originalPackagePrice||s.totalAmount,details:{...s.details,extraItems:te}})}S.success("تم إضافة الخدمة الإضافية بنجاح")},j=we(s.clientId),Ie=j.icon,g=s.totalAmount-s.paidAmount;return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 pb-12",dir:"rtl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pb-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-xl bg-white hover:bg-gray-50 text-gray-400 hover:text-gray-900 transition-all border border-gray-100 shadow-sm",children:e.jsx($e,{size:18})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("h2",{className:"text-lg font-black text-gray-900 truncate tracking-tight",children:s.title}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 border border-blue-100 text-[9px] font-bold",children:"عرض فقط"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-black text-gray-400 uppercase tracking-widest bg-gray-50 px-1.5 py-0.5 rounded-md border border-gray-100",children:[e.jsx(ce,{size:8,className:"text-blue-500"})," ",s.servicePackage]}),e.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-black text-gray-400 uppercase tracking-widest bg-gray-50 px-1.5 py-0.5 rounded-md border border-gray-100",children:[e.jsx(N,{size:8,className:"text-blue-500"})," ",s.shootDate]}),e.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-black text-gray-400 uppercase tracking-widest bg-gray-50 px-1.5 py-0.5 rounded-md border border-gray-100",children:[e.jsx(v,{size:8,className:"text-blue-500"})," ",(L=s.details)==null?void 0:L.startTime," - ",(B=s.details)==null?void 0:B.endTime]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3 self-end md:self-center",children:e.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-1.5 px-4 flex items-center gap-3 shadow-sm",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-tighter",children:"حالة الحجز الحالية"}),e.jsx("span",{className:"text-blue-600 font-black text-xs",children:le[s.status]})]})})]}),e.jsx("div",{className:"bg-gray-100/50 p-1 rounded-2xl border border-gray-100 flex gap-1 shadow-inner overflow-x-auto no-scrollbar",children:[{id:"client",label:"بيانات العميل",icon:Oe,color:"text-blue-600"},{id:"logistics",label:"اللوجستيات",icon:M,color:"text-amber-600"},{id:"financials",label:"المالية",icon:de,color:"text-emerald-600"},{id:"workflow",label:"سير العمل",icon:T,color:"text-indigo-600"}].map(a=>e.jsxs("button",{onClick:()=>he(a.id),className:`flex-1 min-w-fit px-3 py-2 rounded-xl flex items-center justify-center gap-2 font-black text-[10px] transition-all ${n===a.id?"bg-white text-gray-900 shadow-sm border border-gray-100":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(a.icon,{size:12,className:n===a.id?a.color:"text-gray-300"}),e.jsx("span",{className:"whitespace-nowrap",children:a.label})]},a.id))}),e.jsxs("div",{className:"min-h-[400px]",children:[n==="client"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-[80px] rounded-full -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-amber-500/5 blur-[60px] rounded-full -ml-24 -mb-24"}),e.jsxs("div",{className:"relative p-4 flex flex-col md:flex-row items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-linear-to-br from-blue-500 to-blue-700 flex items-center justify-center text-xl font-black text-white shadow-lg border border-white/20",children:s.clientName.charAt(0)}),e.jsx("div",{className:`absolute -bottom-1 -right-1 p-1.5 rounded-lg ${j.bg} ${j.borderColor} border shadow-sm backdrop-blur-md`,children:e.jsx(Ie,{size:14,className:j.color})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-right space-y-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 justify-center md:justify-start",children:[e.jsx("h4",{className:"text-lg font-black text-gray-900 tracking-tight",children:s.clientName}),e.jsxs("div",{className:"flex gap-1.5 justify-center",children:[e.jsx(De,{booking:s,allBookings:d,compact:!0}),s.isFamous&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-amber-50 border border-amber-100 rounded-full",children:[e.jsx(Re,{size:10,className:"text-amber-600 fill-amber-600"}),e.jsx("span",{className:"text-[8px] font-black text-amber-700 uppercase",children:"مشاهير"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start text-gray-400 font-bold uppercase tracking-widest text-[8px]",children:[e.jsx(ie,{size:10,className:"text-blue-500"}),e.jsx("span",{children:s.category===A.WEDDING?"زفاف":s.category===A.STUDIO?"ستوديو":s.category===A.LOCATION?"حجز فيلا":"عائلي"}),e.jsx("span",{className:"mx-1 opacity-20",children:"|"}),e.jsxs("span",{children:["عضو منذ ",P(D(s.createdAt||s.shootDate),"MMMM yyyy",{locale:$})]})]})]}),e.jsxs("div",{className:"max-w-xs space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase tracking-tighter",children:[e.jsx("span",{className:"text-blue-600",children:"مستوى الولاء: بلاتيني"}),e.jsx("span",{className:"text-gray-400",children:"85% نحو الجائزة القادمة"})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full p-px",children:e.jsx("div",{className:"h-full bg-linear-to-r from-blue-500 to-blue-600 rounded-full",style:{width:"85%"}})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[e.jsxs("div",{className:"bg-white p-3.5 rounded-2xl border border-gray-100 space-y-3 shadow-sm",children:[e.jsxs("h5",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[e.jsx(ne,{size:9,className:"text-blue-500"})," قنوات التواصل"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{icon:ne,label:"رقم الموبايل",value:s.clientPhone,color:"blue"}),e.jsx(w,{icon:He,label:"واتساب",value:s.clientPhone,color:"emerald"}),e.jsx(w,{icon:Fe,label:"الإيميل",value:s.clientEmail||"غير متوفر",color:"blue"}),s.client_token&&e.jsx(w,{icon:Le,label:"بوابة العميل",value:Se(s.client_token),color:"rose"})]})]}),e.jsxs("div",{className:"bg-white p-3.5 rounded-2xl border border-gray-100 shadow-sm relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("h5",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest",children:"إحصائيات التعامل"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-1 px-2 py-1 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-[10px] font-bold transition-colors",children:[e.jsx(xe,{className:"w-3 h-3"}),"إضافة خدمة"]}),e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-1 px-2 py-1 bg-amber-50 hover:bg-amber-100 text-amber-600 rounded-lg text-[10px] font-bold transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),"إضافة رصيد"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ue,{label:"إجمالي الحجوزات",value:(d.filter(a=>a.clientId===s.clientId).length||1).toString(),icon:N}),e.jsx(ue,{label:"إجمالي الإنفاق",value:c(d.filter(a=>a.clientId===s.clientId).reduce((a,l)=>a+l.totalAmount,0)||s.totalAmount,s.currency),icon:Ke})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsxs("h5",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-1.5",children:[e.jsx(We,{size:9,className:"text-amber-500"})," معلومات الخدمة"]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(C,{label:"تاريخ الحجز",value:P(D(s.shootDate),"dd MMMM yyyy",{locale:$}),icon:N}),e.jsx(C,{label:"نوع المناسبة",value:s.category,icon:ie}),e.jsx(C,{label:"الباقة المختارة",value:s.servicePackage,icon:ce}),e.jsx(C,{label:"الموقع",value:((K=s.details)==null?void 0:K.hallName)||"ستوديو فيلا حداد",icon:oe})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[e.jsxs("h5",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-1.5",children:[e.jsx(M,{size:9,className:"text-blue-500"})," التفضيلات والملاحظات"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3.5 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-600 uppercase mb-1.5",children:"ستايل التصوير المفضل"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:["كلاسيك","سينمائي","إضاءة خافتة"].map(a=>e.jsx("span",{className:"px-2.5 py-0.5 bg-blue-50 text-blue-600 text-[8px] font-black rounded-full border border-blue-100",children:a},a))})]}),e.jsxs("div",{className:"bg-gray-50 p-3.5 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase mb-1.5",children:"ملاحظات العميل الخاصة"}),e.jsx("p",{className:"text-[10px] text-gray-600 font-bold leading-relaxed",children:((W=s.details)==null?void 0:W.notes)||"لا توجد ملاحظات إضافية لهذا العميل."})]})]})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm",children:e.jsx(Me,{clientId:s.clientId,clientName:s.clientName,currentUser:H,currency:s.currency,compact:!0},ge)})]})]})]}),n==="logistics"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 animate-in fade-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"lg:col-span-2 space-y-5",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 mb-5 flex items-center gap-3",children:[e.jsx(M,{className:"text-amber-500",size:18})," التفاصيل واللوجستيات"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-6 font-bold",children:[((G=s.details)==null?void 0:G.hallName)&&e.jsx(o,{label:"القاعة",value:s.details.hallName,icon:e.jsx(me,{size:14}),color:"blue"}),((U=s.details)==null?void 0:U.university)&&e.jsx(o,{label:"الجامعة",value:s.details.university,icon:e.jsx(me,{size:14}),color:"amber"}),((V=s.details)==null?void 0:V.gownColor)&&e.jsx(o,{label:"الرداء",value:s.details.gownColor,icon:e.jsx(Ge,{size:14}),color:"emerald"}),e.jsx(o,{label:"تاريخ التنفيذ",value:s.shootDate,icon:e.jsx(N,{size:14}),color:"blue"}),e.jsx(o,{label:"وقت البدء",value:((_=s.details)==null?void 0:_.startTime)||"--:--",icon:e.jsx(v,{size:14}),color:"amber"}),e.jsx(o,{label:"وقت الانتهاء",value:((q=s.details)==null?void 0:q.endTime)||"--:--",icon:e.jsx(v,{size:14}),color:"rose"})]}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-gray-100",children:[e.jsx(I,{label:"توقيع العقد الرقمي",done:!0}),e.jsx(I,{label:"استلام العربون التأكيدي",done:!0}),e.jsx(I,{label:"اكتمال جلسة التصوير",done:s.status!==m.INQUIRY&&s.status!==m.CONFIRMED}),e.jsx(I,{label:"تجهيز مساحة العمل والفرز",done:s.status===m.EDITING||s.status===m.SELECTION||s.status===m.DELIVERED})]})]})}),e.jsxs("div",{className:"space-y-6",children:[ve&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-amber-500/10 shadow-sm relative overflow-hidden",children:[e.jsxs("h4",{className:"text-xs font-black text-amber-600 mb-5 flex items-center gap-2",children:[e.jsx(Ue,{size:14})," حالة الطقس المتوقعة"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-xl font-black text-gray-900",children:[((Y=(Q=s.details)==null?void 0:Q.weather)==null?void 0:Y.temp)||24,"°"]}),e.jsx("p",{className:"text-[7px] font-black text-gray-400 uppercase",children:"درجة الحرارة"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-900",children:((X=(J=s.details)==null?void 0:J.weather)==null?void 0:X.condition)||"صافي"}),e.jsx("p",{className:"text-[7px] font-black text-gray-400 uppercase",children:"الحالة"})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-amber-50 rounded-xl flex items-center justify-between border border-amber-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-amber-700",children:"ساعة ذهبية"}),e.jsx("p",{className:"text-base font-black text-gray-900",children:((k=(Z=s.details)==null?void 0:Z.weather)==null?void 0:k.sunset)||"17:45"})]}),e.jsx(Ve,{size:28,className:"text-amber-500"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("h4",{className:"text-xs font-black text-gray-400 mb-4 uppercase",children:"موقع التصوير"}),s.location?e.jsxs("a",{href:s.location,target:"_blank",className:"flex items-center gap-3 p-4 bg-blue-50 rounded-2xl border border-blue-100 hover:bg-blue-100 transition-all group",rel:"noreferrer",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-xl text-white shadow-sm",children:e.jsx(oe,{size:20})}),e.jsx("span",{className:"text-xs font-black text-blue-600",children:"فتح في خرائط جوجل"})]}):e.jsx("p",{className:"text-xs text-gray-400 font-bold italic",children:"لا يوجد رابط موقع محدد لهذا الحجز"})]})]})]}),n==="financials"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 animate-in fade-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"lg:col-span-2 space-y-5",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 flex items-center gap-3",children:[e.jsx(de,{className:"text-emerald-500",size:18})," الحالة المالية"]}),g>0&&e.jsx("span",{className:"px-3 py-1 bg-rose-50 text-rose-600 rounded-full text-[10px] font-black border border-rose-100",children:"بانتظار التسوية"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsx(u,{label:"سعر الجلسة الأساسي",value:c(((ee=s.details)==null?void 0:ee.baseAmount)||s.totalAmount,s.currency),color:"text-blue-600"}),((se=s.details)==null?void 0:se.extraItems)&&s.details.extraItems.length>0&&e.jsx(u,{label:"الخدمات الإضافية",value:c(s.details.extraItems.reduce((a,l)=>a+(l.amount||0),0),s.currency),color:"text-purple-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl border border-gray-200",children:[e.jsx(u,{label:"المبلغ الواصل",value:c(s.totalAmount,s.currency),color:"text-gray-900"}),e.jsx(u,{label:"المدفوع",value:c(s.paidAmount,s.currency),color:"text-emerald-600"}),e.jsx(u,{label:"المتبقي",value:c(g,s.currency),color:g>0?"text-rose-600":"text-gray-400"})]}),((ae=s.details)==null?void 0:ae.extraItems)&&s.details.extraItems.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black text-purple-400 uppercase mb-2",children:"الخدمات الإضافية"}),s.details.extraItems.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-2xl border border-purple-100",children:[e.jsx("span",{className:"text-xs font-black text-purple-700",children:a.description}),e.jsxs("span",{className:"text-xs font-black text-purple-900",children:["+",c(a.amount,a.currency||s.currency)]})]},l))]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-gray-100 shadow-sm font-bold",children:[e.jsx("h4",{className:"text-xs font-black text-gray-400 mb-6 uppercase tracking-widest",children:"إحصائيات الإيراد"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-[11px]",children:[e.jsx("span",{className:"text-gray-500",children:"نسبة التحصيل"}),e.jsxs("span",{className:"text-emerald-600",children:[Math.round(s.paidAmount/s.totalAmount*100),"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s.paidAmount/s.totalAmount*100}%`}})}),e.jsx("p",{className:"text-[9px] text-gray-400 leading-relaxed font-bold",children:"تم تحصيل العربون وتأكيد الحجز مالياً في نظام الحسابات المركزي."})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-gray-100 shadow-sm font-bold",children:[e.jsxs("h4",{className:"text-xs font-black text-gray-400 mb-4 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(p,{size:12}),"طباعة وصل استلام"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>y({booking:s,type:"deposit",amount:s.paidAmount,currency:s.currency,description:"عربون تأكيد الحجز"}),className:"flex items-center justify-center gap-1.5 py-2.5 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 rounded-xl text-[10px] font-black transition-colors border border-emerald-100",children:[e.jsx(p,{size:11}),"العربون"]}),e.jsxs("button",{onClick:()=>y({booking:s,type:"full",amount:s.totalAmount,currency:s.currency,description:"استلام المبلغ الكامل"}),className:"flex items-center justify-center gap-1.5 py-2.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl text-[10px] font-black transition-colors border border-blue-100",children:[e.jsx(p,{size:11}),"كامل"]}),e.jsxs("button",{onClick:()=>y({booking:s,type:"addon",amount:s.addOnTotal||0,currency:s.currency,description:"مبلغ الخدمات الإضافية"}),className:"flex items-center justify-center gap-1.5 py-2.5 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-xl text-[10px] font-black transition-colors border border-purple-100",children:[e.jsx(p,{size:11}),"إضافي"]}),e.jsxs("button",{onClick:()=>y({booking:s,type:"partial",amount:g>0?s.paidAmount:s.totalAmount,currency:s.currency,description:`دفعة جزئية - ${c(s.paidAmount,s.currency)} من ${c(s.totalAmount,s.currency)}`}),className:"flex items-center justify-center gap-1.5 py-2.5 bg-amber-50 hover:bg-amber-100 text-amber-700 rounded-xl text-[10px] font-black transition-colors border border-amber-100",children:[e.jsx(p,{size:11}),"دفعة"]})]})]})]})]}),n==="workflow"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 animate-in fade-in slide-in-from-bottom-2 font-bold",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 flex items-center gap-2.5",children:[e.jsx(E,{className:"text-rose-600",size:16})," اختيار الصور"]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-rose-50 hover:bg-rose-100 text-rose-600 rounded-lg text-[10px] font-black transition-colors border border-rose-100",children:[e.jsx(xe,{className:"w-3.5 h-3.5"}),"فتح مود الاختيار"]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl border border-gray-100 text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 bg-rose-100 text-rose-600 rounded-2xl mx-auto flex items-center justify-center",children:e.jsx(E,{size:24})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-black text-gray-900",children:"إدارة الجلسة واختيار الصور"}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"رفع، عرض، واختيار الصور"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-rose-500 hover:bg-rose-600 text-white rounded-xl text-xs font-black transition-colors shadow-sm",children:[e.jsx(E,{size:14}),"فتح لوحة الاختيار"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 shadow-sm relative overflow-hidden",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx(T,{className:"text-indigo-600",size:16})," المجلد وسيرفر التخزين"]}),e.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl border border-gray-100 text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 text-indigo-600 rounded-2xl mx-auto flex items-center justify-center",children:e.jsx(T,{size:24})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-black text-gray-900",children:["مسار المجلد: ",s.folderPath||"لم يتم الربط"]}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:s.nasStatus==="synced"?"تمت المزامنة بالكامل":"قيد المزامنة"})]}),e.jsx("div",{className:"h-1.5 w-48 bg-gray-200 rounded-full mx-auto overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${s.nasProgress||0}%`}})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx(v,{className:"text-amber-500",size:16})," سجل سير العمل (تاريخ الحالات)"]}),e.jsx("div",{className:"max-h-[250px] overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:e.jsx("div",{className:"space-y-3 relative before:absolute before:inset-y-0 before:right-[9px] before:w-px before:bg-gray-100",children:s.statusHistory&&s.statusHistory.length>0?[...s.statusHistory].reverse().map((a,l)=>e.jsxs("div",{className:"relative pr-6",children:[e.jsx("div",{className:"absolute right-0 top-1 w-5 h-5 rounded-full bg-white border-2 border-amber-400 flex items-center justify-center z-10 shadow-sm",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"})}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("span",{className:"text-[9px] font-black text-amber-600 font-tajawal",children:le[a.status]}),e.jsx("span",{className:"text-[8px] font-black text-gray-400",children:P(D(a.timestamp),"yyyy/MM/dd - HH:mm",{locale:$})})]}),a.notes&&e.jsx("p",{className:"text-[9px] text-gray-500 font-bold",children:a.notes})]})]},l)):e.jsx("p",{className:"text-[10px] text-gray-400 font-bold italic py-4 text-center",children:"لا يوجد سجل حركات حالياً"})})})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx(pe,{className:"text-blue-500",size:16})," التذكيرات والملاحظات"]}),e.jsx("div",{className:"space-y-2",children:t.length===0?e.jsx("p",{className:"text-[10px] text-gray-400 font-bold italic py-2 text-center",children:"لا توجد تذكيرات مجدولة"}):t.map(a=>e.jsxs("div",{className:`flex items-center gap-3 p-2.5 bg-gray-50 rounded-xl border border-gray-100 ${a.completed?"opacity-50":""}`,children:[e.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${a.completed?"bg-emerald-100 text-emerald-600":"bg-blue-50 text-blue-600"}`,children:a.completed?e.jsx(be,{size:14}):e.jsx(pe,{size:14})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-[10px] font-black text-gray-800 ${a.completed?"line-through":""}`,children:a.title}),e.jsx("p",{className:"text-[7px] text-gray-400 uppercase",children:a.dueDate})]})]},a.id))})]})})]})]}),e.jsx(Te,{isOpen:je,onClose:()=>O(!1),clientId:s.clientId,clientName:s.clientName,bookingId:s.id,currentUser:H,currency:s.currency,onTransactionAdded:()=>fe(a=>a+1)}),e.jsx(Ee,{isOpen:ye,onClose:()=>R(!1),onAdd:Ce,bookingCurrency:s.currency}),e.jsx(Pe,{isOpen:Ne,onClose:()=>h(!1),bookingId:s.id,clientName:s.clientName,onComplete:()=>{S.success("تم اكتمال اختيار الصور"),h(!1)}})]})},w=({icon:s,label:t,value:r,color:d,isWhatsApp:b})=>{const i={blue:"text-blue-600 bg-blue-50 border-blue-100",emerald:"text-emerald-600 bg-emerald-50 border-emerald-100"};return e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-50 rounded-xl border border-gray-100 group/social hover:bg-gray-100 transition-all font-bold",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i[d]||i.blue}`,children:e.jsx(s,{size:12})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[7px] font-black text-gray-400 uppercase tracking-tighter leading-none mb-0.5",children:t}),e.jsx("p",{className:"text-[10px] font-black text-gray-900 truncate",dir:"ltr",children:r})]})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r)},className:"p-1 text-gray-400 hover:text-gray-900 rounded-lg opacity-0 group-hover/social:opacity-100",children:e.jsx(Ye,{size:10})})]})},ue=({label:s,value:t,icon:r})=>e.jsxs("div",{className:"bg-gray-50 p-2.5 rounded-xl border border-gray-100 flex flex-col items-center text-center font-bold",children:[e.jsx(r,{size:12,className:"text-gray-400 mb-1"}),e.jsx("p",{className:"text-[9px] font-black text-gray-900 font-mono",children:t}),e.jsx("p",{className:"text-[6px] font-black text-gray-400 uppercase tracking-tighter leading-none",children:s})]}),C=({label:s,value:t,icon:r})=>e.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[e.jsx("div",{className:"p-1.5 bg-blue-50 rounded-lg text-blue-600",children:e.jsx(r,{size:12})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase tracking-tighter leading-none mb-0.5",children:s}),e.jsx("p",{className:"text-[10px] font-black text-gray-700",children:t})]})]}),u=({label:s,value:t,color:r})=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl border border-gray-100 shadow-inner flex flex-col items-center justify-center font-bold",children:[e.jsx("p",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-0.5",children:s}),e.jsx("p",{className:`text-base font-black ${r} truncate max-w-full`,children:t})]}),o=({label:s,value:t,icon:r,color:d})=>{const b={blue:"text-blue-600 bg-blue-50",amber:"text-amber-600 bg-amber-50",emerald:"text-emerald-600 bg-emerald-50",rose:"text-rose-600 bg-rose-50"};return e.jsxs("div",{className:"bg-gray-50 p-2.5 rounded-xl border border-gray-100 flex items-center gap-2.5 shadow-inner",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${b[d]}`,children:r}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase truncate",children:s}),e.jsx("p",{className:"text-[11px] font-black text-gray-900 truncate",children:t})]})]})},I=({label:s,done:t})=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all duration-300 ${t?"border-emerald-100 bg-emerald-50/50":"border-gray-100 bg-gray-50"}`,children:[t?e.jsx("div",{className:"h-5 w-5 rounded-md bg-emerald-500 flex items-center justify-center shadow-sm",children:e.jsx(be,{size:12,className:"text-white",strokeWidth:4})}):e.jsx("div",{className:"h-5 w-5 rounded-md border-2 border-gray-200"}),e.jsx("span",{className:`text-[11px] font-black ${t?"text-emerald-700":"text-gray-400"}`,children:s})]});export{ls as default};
