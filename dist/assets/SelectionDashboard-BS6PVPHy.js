import{r,j as e}from"./vendor-react-Ce27NbrU.js";import{n as m,t as x,h as Ye,B as we,k as ye}from"./index-BFvmHygk.js";import Je from"./UnifiedTeamChat-C4pUsPfK.js";import{y as Ue,ah as qe,aj as Pe,d as Z,aS as Ve,T as ze,aK as Ze,m as N,B as Ke,a as ae,c as Xe,o as Qe,A as et,a6 as tt,$ as ke,H as Ee,V as st,P as lt,h as V,b as at,at as rt,bP as it,q as re,b_ as ie,J as ne,r as Ce,a_ as nt,X as ot,ab as ct,ac as dt,b1 as xt,aO as mt,C as ht}from"./vendor-ui-TjLGESBy.js";import"./vendor-supabase-CSCOup90.js";import"./vendor-utils-DKqDJWuS.js";import"./ReceptionWidgetCard-DgiBK5ow.js";const Se=["تبييض أسنان","إزالة عيوب","تنعيم بشرة","تنحيف","فتح عيون","إزالة كائن","تعديل ألوان","تأطير"],wt=({bookings:n,currentUser:$,users:K=[],onStatusUpdate:z})=>{var be;const[P,w]=r.useState("HOME"),[d,C]=r.useState(null),[k,H]=r.useState(""),[y,E]=r.useState("all"),[o,b]=r.useState([]),[f,R]=r.useState(null),[Ie,oe]=r.useState(!1),[I,A]=r.useState(1),[ce,X]=r.useState({x:50,y:50}),[B,de]=r.useState(""),[_,Te]=r.useState([]),[$e,Q]=r.useState(!1),[ee,W]=r.useState(!1),[g,te]=r.useState(null),[Y,De]=r.useState([]),h=r.useMemo(()=>n.filter(t=>t.status===m.SHOOTING_COMPLETED||t.status===m.SELECTION),[n]),M=r.useMemo(()=>n.filter(t=>t.status===m.EDITING),[n]),F=r.useMemo(()=>n.filter(t=>t.status===m.READY_FOR_PICKUP),[n]),xe=r.useMemo(()=>{let t=h;if(y==="waiting"?t=t.filter(s=>s.status===m.SHOOTING_COMPLETED):y==="active"?t=t.filter(s=>s.status===m.SELECTION):y==="done"&&(t=M),k.trim()){const s=k.toLowerCase();t=t.filter(l=>(l.clientName||"").toLowerCase().includes(s)||(l.title||"").toLowerCase().includes(s))}return t},[h,M,y,k]);r.useEffect(()=>{const t=[];h.forEach(s=>{s.status===m.SHOOTING_COMPLETED&&((s.nasStatus==="pending"||s.nasStatus==="none"||!s.nasStatus)&&t.push({id:`nas-${s.id}`,type:"warning",message:`الصور لم تُنقل بعد من NAS - ${s.clientName}`,bookingId:s.id,time:"الآن"}),s.nasStatus==="synced"&&t.push({id:`ready-${s.id}`,type:"info",message:`الصور جاهزة للاختيار - ${s.clientName}`,bookingId:s.id,time:"الآن"}))}),De(t)},[h]);const Le=r.useCallback(async t=>{if(z)try{await z(t.id,m.SELECTION),x.success(`بدأ اختيار الصور - ${t.clientName}`)}catch{x.error("فشل بدء الاختيار")}},[z]),me=r.useCallback(async t=>{var l;if(!z)return;const s=o.filter(a=>a.status==="approved");if(s.length===0){x.error("لا توجد صور مختارة — اختر صور أولاً");return}if(window.confirm(`إنهاء الاختيار وإرسال "${t.clientName}" للتصميم؟

سيتم نسخ ${s.length} صورة مختارة إلى مجلد 02_SELECTED`))try{const a=window.electronAPI;if((l=a==null?void 0:a.sessionLifecycle)!=null&&l.copyToSelected&&t.folderPath){const c=s.map(u=>u.name),i=await a.sessionLifecycle.copyToSelected(t.folderPath,c);(i==null?void 0:i.copied)>0&&x.success(`تم نسخ ${i.copied} صورة إلى مجلد الاختيار`),(i==null?void 0:i.failed)>0&&x.error(`فشل نسخ ${i.failed} صورة`)}await z(t.id,m.EDITING),x.success(`تم إرسال "${t.clientName}" للتصميم`),C(null),w("HOME")}catch{x.error("فشل إرسال الحجز للتصميم")}},[z,o]),J=r.useCallback(async t=>{var l;if(t.folderPath)return t;const s=window.electronAPI;if(!((l=s==null?void 0:s.sessionLifecycle)!=null&&l.createSessionDirectory))return t;try{const a=t.nasSessionId||t.id,c=t.shootDate||new Date().toISOString(),i=await s.sessionLifecycle.createSessionDirectory(t.clientName||"",a,c,t);return!(i!=null&&i.success)||!i.sessionPath?t:(await Ye.updateBooking(t.id,{folderPath:i.sessionPath,nasSessionId:a}),{...t,folderPath:i.sessionPath,nasSessionId:a})}catch(a){return console.error("[Selection] ensureSessionFolder failed:",a),t}},[]),he=r.useCallback(async t=>{const s=await J(t);C(s),w("GALLERY"),Oe(s)},[J]),Oe=r.useCallback(async t=>{var s;oe(!0),b([]);try{const l=window.electronAPI;if(t.folderPath&&((s=l==null?void 0:l.fileSystem)!=null&&s.listDirectory)){const a=`${t.folderPath}/01_RAW`,c=await l.fileSystem.listDirectory(a);if(c&&Array.isArray(c)){const i=c.filter(u=>/\.(jpg|jpeg|png|raw|cr2|arw|heic|webp)$/i.test(u.name)).map((u,L)=>({id:L+1,src:`file://${u.path}`,name:u.name,status:"pending",rating:0,note:"",tags:[]}));b(i),x.success(`تم تحميل ${i.length} صورة`)}else b([])}else b([])}catch(l){console.error("[Gallery] Failed to load:",l),x.error("فشل تحميل الصور")}finally{oe(!1)}},[]),U=r.useCallback(async t=>{var u,L,ge,je,ve;if(!d)return;const s=window.electronAPI;let l=d;l.folderPath||(l=await J(l),C(l));const a=t.map((j,G)=>({id:Date.now()+G,src:URL.createObjectURL(j),name:j.name,status:"pending",rating:0,note:"",tags:[]}));b(j=>[...j,...a]);const c=t.map(j=>j.path).filter(Boolean),i=c.length>0;if(console.log("[Ingest] File paths:",c,"| Has paths:",i),console.log("[Ingest] electronAPI available:",!!s),s!=null&&s.sessionLifecycle)try{const j=Date.now(),G=t.length;te({percent:0,status:"جاري المعالجة...",current:0,total:G,startTime:j});const le=(L=(u=s.sessionLifecycle).onIngestionProgress)==null?void 0:L.call(u,v=>{const S=Math.round((v.progress||0)/100*G);te({percent:v.progress||0,status:v.status||"",current:S,total:G,startTime:j})}),Ne={clientName:l.clientName||"",sessionId:l.id,bookingId:l.id,date:new Date,sessionPath:l.folderPath||""};let p;if(i&&s.sessionLifecycle.processFiles)p=await s.sessionLifecycle.processFiles(c,Ne);else if(s.sessionLifecycle.processFileBuffers){console.log("[Ingest] Sandbox mode — reading files as buffers...");const v=await Promise.all(t.map(async S=>({name:S.name,buffer:await S.arrayBuffer()})));p=await s.sessionLifecycle.processFileBuffers(v,Ne)}if(le==null||le(),console.log("[Ingest] Result:",JSON.stringify(p,null,2)),((ge=p==null?void 0:p.success)==null?void 0:ge.length)>0){b(S=>S.map(q=>{const O=p.success.find(We=>We.fileName===q.name);return O?{...q,src:O.thumbnail||O.cloud||q.src,cloudUrl:O.cloud,thumbnailUrl:O.thumbnail,localPath:O.local}:q}));const v=p.success.filter(S=>S.cloud).length;v>0?x.success(`تم رفع ${v} صورة إلى R2 بنجاح`):x.warning("تم حفظ الصور محلياً فقط - R2 غير متاح")}if(((je=p==null?void 0:p.failed)==null?void 0:je.length)>0){console.error("[Ingest] Failed files:",p.failed);const v=((ve=p.failed[0])==null?void 0:ve.error)||"خطأ غير معروف";x.error(`فشل رفع ${p.failed.length} صورة: ${v}`)}}catch(j){console.error("[Selection] Ingestion failed:",j),x.error("فشل معالجة الصور")}finally{te(null)}else x.success(`تم إضافة ${t.length} صورة (معاينة فقط)`)},[d,J]),ue=r.useCallback(()=>{const t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/*",t.onchange=s=>{const l=Array.from(s.target.files||[]);l.length>0&&U(l)},t.click()},[U]),Ae=r.useCallback(t=>{t.preventDefault(),t.stopPropagation(),Q(!0)},[]),Me=r.useCallback(t=>{t.preventDefault(),t.stopPropagation(),Q(!1)},[]),Fe=r.useCallback(t=>{t.preventDefault(),t.stopPropagation(),Q(!1);const s=Array.from(t.dataTransfer.files);console.log("[Drop] Total files dropped:",s.length),s.forEach((a,c)=>{console.log(`[Drop] File ${c}: name=${a.name}, path=${a.path}, size=${a.size}, type=${a.type}`)});const l=s.filter(a=>/\.(jpg|jpeg|png|gif|webp|heic|bmp|tiff?|cr2|arw|raw)$/i.test(a.name));if(l.length===0){x.error("لم يتم العثور على صور صالحة");return}console.log("[Drop] Valid image files:",l.length),U(l)},[U]),D=r.useCallback((t,s)=>{b(l=>l.map(a=>a.id===t?{...a,status:s}:a))},[]),Ge=r.useCallback((t,s)=>{b(l=>l.map(a=>a.id===t?{...a,rating:s}:a))},[]),He=r.useCallback((t,s)=>{b(l=>l.map(a=>a.id===t?{...a,note:s}:a))},[]),se=r.useCallback((t,s)=>{b(l=>l.map(a=>{if(a.id!==t)return a;const c=a.tags.includes(s)?a.tags.filter(i=>i!==s):[...a.tags,s];return{...a,tags:c}}))},[]),fe=r.useCallback(()=>{const t=B.trim();if(t){if(!_.includes(t)&&!Se.includes(t)&&Te(s=>[...s,t]),f!==null&&o[f]){const s=o[f];s.tags.includes(t)||se(s.id,t)}de("")}},[B,_,f,o,se]),Re=r.useMemo(()=>[...Se,..._],[_]),pe=r.useCallback(t=>{if(f===null)return;const s=t==="next"?f+1:f-1;s>=0&&s<o.length&&(R(s),A(1),X({x:50,y:50}),W(!1))},[f,o.length]),Be=r.useMemo(()=>[{label:"بانتظار الاختيار",value:h.filter(t=>t.status===m.SHOOTING_COMPLETED).length,icon:Ue,color:"amber",gradient:"from-amber-500 to-orange-600"},{label:"جاري الاختيار",value:h.filter(t=>t.status===m.SELECTION).length,icon:qe,color:"violet",gradient:"from-violet-500 to-purple-600"},{label:"تم إرسالها للتصميم",value:M.length,icon:Pe,color:"blue",gradient:"from-blue-500 to-cyan-600"},{label:"جاهز للاستلام",value:F.length,icon:Z,color:"emerald",gradient:"from-emerald-500 to-teal-600"}],[h,M,F]),T=r.useMemo(()=>({total:o.length,approved:o.filter(t=>t.status==="approved").length,rejected:o.filter(t=>t.status==="rejected").length,maybe:o.filter(t=>t.status==="maybe").length,pending:o.filter(t=>t.status==="pending").length}),[o]),_e=[{id:"HOME",icon:Ve,label:"الرئيسية",count:h.length},{id:"GALLERY",icon:ze,label:"المعرض",count:o.length>0?T.pending:0},{id:"CHAT",icon:Ze,label:"الدردشة",count:0}];return e.jsxs("div",{className:"h-full w-full flex overflow-hidden font-sans",dir:"rtl",children:[e.jsxs(N.aside,{initial:{x:40,opacity:0},animate:{x:0,opacity:1},className:"w-[72px] shrink-0 my-3 mr-3 flex flex-col items-center py-4 rounded-2xl bg-[#0c0c10]/90 backdrop-blur-2xl border border-white/[0.04] z-50",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-fuchsia-600 flex items-center justify-center text-white text-sm font-black shadow-lg shadow-violet-500/25",children:((be=$==null?void 0:$.name)==null?void 0:be.charAt(0))||"S"})}),e.jsx("div",{className:"flex flex-col gap-2 w-full px-3 flex-1",children:_e.map(t=>e.jsxs("button",{onClick:()=>w(t.id),className:`group relative w-full aspect-square rounded-xl flex flex-col items-center justify-center gap-1 transition-all duration-200 ${P===t.id?"bg-gradient-to-br from-violet-500 to-fuchsia-600 text-white shadow-lg shadow-violet-500/25":"text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.04]"}`,children:[e.jsx(t.icon,{size:18,strokeWidth:P===t.id?2.5:1.8}),e.jsx("span",{className:"text-[7px] font-bold tracking-wide",children:t.label}),t.count>0&&e.jsx("div",{className:"absolute -top-1 -left-1 min-w-[16px] h-4 px-1 bg-rose-500 rounded-full flex items-center justify-center text-[8px] font-bold text-white border-2 border-[#0c0c10]",children:t.count})]},t.id))}),e.jsxs("div",{className:"mt-auto relative",children:[e.jsx("button",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-zinc-500 hover:text-zinc-300 hover:bg-white/[0.04] transition-all",children:e.jsx(Ke,{size:18})}),Y.filter(t=>t.type==="warning").length>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center text-[8px] font-bold text-black border-2 border-[#0c0c10] animate-pulse",children:Y.filter(t=>t.type==="warning").length})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden m-3 ml-1.5",children:e.jsxs(ae,{mode:"wait",children:[P==="HOME"&&e.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-black text-white flex items-center gap-2",children:["صالة الاختيار",e.jsx(Xe,{size:16,className:"text-violet-400"})]}),e.jsxs("p",{className:"text-zinc-500 text-xs mt-0.5",children:[h.length," حجز بانتظار الاختيار"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-600",size:14}),e.jsx("input",{type:"text",value:k,onChange:t=>H(t.target.value),placeholder:"بحث بالاسم...",className:"w-52 h-9 pr-9 pl-4 bg-white/[0.03] border border-white/[0.06] rounded-xl text-xs text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-violet-500/30 transition-colors"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4 shrink-0",children:Be.map((t,s)=>e.jsx("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-xl p-3 hover:border-white/[0.08] transition-all",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`w-9 h-9 rounded-lg bg-gradient-to-br ${t.gradient} flex items-center justify-center shadow-lg`,children:e.jsx(t.icon,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-black text-white leading-none",children:t.value}),e.jsx("p",{className:"text-[9px] text-zinc-500 font-bold mt-0.5",children:t.label})]})]})},s))}),Y.filter(t=>t.type==="warning").length>0&&e.jsx("div",{className:"mb-3 shrink-0",children:e.jsxs("div",{className:"bg-amber-500/[0.06] border border-amber-500/15 rounded-xl p-3 flex items-center gap-3",children:[e.jsx(et,{size:16,className:"text-amber-400 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-amber-300 text-xs font-bold",children:"تنبيهات النقل"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5",children:Y.filter(t=>t.type==="warning").map(t=>e.jsx("span",{className:"text-[10px] text-amber-400/80 bg-amber-500/10 px-2 py-0.5 rounded-md border border-amber-500/10",children:t.message},t.id))})]})]})}),e.jsx("div",{className:"flex items-center gap-1 mb-3 shrink-0",children:[{id:"all",label:"الكل",count:h.length},{id:"waiting",label:"بانتظار",count:h.filter(t=>t.status===m.SHOOTING_COMPLETED).length},{id:"active",label:"جاري",count:h.filter(t=>t.status===m.SELECTION).length},{id:"done",label:"مرسلة",count:M.length}].map(t=>e.jsxs("button",{onClick:()=>E(t.id),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${y===t.id?"bg-violet-500/15 text-violet-300 border border-violet-500/20":"text-zinc-500 hover:text-zinc-400 border border-transparent"}`,children:[t.label," (",t.count,")"]},t.id))}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3 overflow-hidden min-h-0",children:[e.jsx("div",{className:"col-span-2 flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pl-1 [&::-webkit-scrollbar]:w-1 [&::-webkit-scrollbar-thumb]:bg-white/10 [&::-webkit-scrollbar-thumb]:rounded-full",children:xe.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-600",children:[e.jsx(tt,{size:40,className:"mb-3 opacity-20"}),e.jsx("p",{className:"text-xs font-bold",children:"لا توجد حجوزات"}),e.jsx("p",{className:"text-[10px] mt-1 text-zinc-700",children:"الحجوزات ستظهر هنا بعد إتمام التصوير"})]}):xe.map((t,s)=>e.jsx(ut,{booking:t,index:s,onStartSelection:Le,onFinishSelection:me,onOpenGallery:he},t.id))})}),e.jsxs("div",{className:"flex flex-col gap-3 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white/[0.02] border border-white/[0.05] rounded-xl",children:[e.jsx("div",{className:"p-3 border-b border-white/[0.04] shrink-0",children:e.jsxs("h3",{className:"text-white font-bold text-sm flex items-center gap-2",children:[e.jsx(Z,{size:14,className:"text-emerald-400"}),"جاهز للاستلام",e.jsx("span",{className:"mr-auto text-[10px] text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:F.length})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1.5 [&::-webkit-scrollbar]:w-1 [&::-webkit-scrollbar-thumb]:bg-white/10 [&::-webkit-scrollbar-thumb]:rounded-full",children:F.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-700",children:[e.jsx(Z,{size:28,className:"mb-2 opacity-15"}),e.jsx("p",{className:"text-[10px] font-bold",children:"لا يوجد"})]}):F.map(t=>{var s;return e.jsxs("div",{className:"bg-emerald-500/[0.05] border border-emerald-500/10 rounded-lg p-2.5 hover:border-emerald-500/20 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-400 font-black text-xs",children:(s=t.clientName)==null?void 0:s.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-xs font-bold truncate",children:t.clientName}),e.jsx("p",{className:"text-zinc-600 text-[9px] truncate",children:t.title})]})]}),t.clientPhone&&e.jsxs("a",{href:`tel:${t.clientPhone}`,className:"mt-2 flex items-center justify-center gap-1 w-full py-1.5 bg-emerald-500/10 hover:bg-emerald-500/15 rounded-md text-emerald-400 text-[9px] font-bold transition-colors",children:[e.jsx(ke,{size:9})," اتصال"]})]},t.id)})})]}),e.jsxs("div",{className:"shrink-0 bg-white/[0.02] border border-white/[0.05] rounded-xl p-3",children:[e.jsxs("h3",{className:"text-white font-bold text-xs flex items-center gap-2 mb-2",children:[e.jsx(Ee,{size:13,className:"text-blue-400"}),"حالة النقل من NAS"]}),e.jsxs("div",{className:"space-y-1.5",children:[h.slice(0,3).map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.nasStatus==="synced"?"bg-emerald-400":t.nasStatus==="pending"?"bg-amber-400 animate-pulse":"bg-zinc-600"}`}),e.jsx("span",{className:"text-[10px] text-zinc-400 truncate flex-1",children:t.clientName}),e.jsx("span",{className:`text-[9px] font-bold ${t.nasStatus==="synced"?"text-emerald-400":t.nasStatus==="pending"?"text-amber-400":"text-zinc-600"}`,children:t.nasStatus==="synced"?"تم النقل":t.nasStatus==="pending"?"جاري...":"لم ينقل"})]},t.id)),h.length===0&&e.jsx("p",{className:"text-[10px] text-zinc-700 text-center py-2",children:"لا توجد عمليات نقل"})]})]})]})]})]},"home"),P==="GALLERY"&&e.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsx("button",{onClick:()=>{w("HOME"),C(null),b([])},className:"w-8 h-8 rounded-lg bg-white/[0.04] hover:bg-white/[0.08] flex items-center justify-center text-zinc-400 transition-colors",children:e.jsx(st,{size:16})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-black text-white flex items-center gap-2",children:[d?d.clientName:"المعرض",e.jsx(ze,{size:15,className:"text-violet-400"})]}),e.jsx("p",{className:"text-zinc-500 text-[10px]",children:d?`${d.title} • ${o.length} صورة`:"اختر حجز لعرض الصور"})]})]}),o.length>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[e.jsxs("span",{className:"text-emerald-400 font-bold",children:[T.approved," مقبول"]}),e.jsx("span",{className:"text-zinc-600",children:"•"}),e.jsxs("span",{className:"text-rose-400 font-bold",children:[T.rejected," مرفوض"]}),e.jsx("span",{className:"text-zinc-600",children:"•"}),e.jsxs("span",{className:"text-amber-400 font-bold",children:[T.maybe," ربما"]}),e.jsx("span",{className:"text-zinc-600",children:"•"}),e.jsxs("span",{className:"text-zinc-400 font-bold",children:[T.pending," معلق"]})]}),d&&d.status===m.SELECTION&&e.jsx("button",{onClick:()=>me(d),className:"px-4 py-1.5 bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-violet-500/20 hover:shadow-violet-500/30 transition-all",children:"إنهاء وإرسال للتصميم"}),d&&e.jsxs("button",{onClick:ue,className:"px-3 py-1.5 bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 text-[10px] font-bold rounded-lg border border-emerald-500/30 transition-all flex items-center gap-1",children:[e.jsx(lt,{size:12}),"إضافة صور"]}),(d==null?void 0:d.folderPath)&&e.jsxs("button",{onClick:async()=>{var t,s;try{const l=window.electronAPI;if((t=l==null?void 0:l.nasConfig)!=null&&t.openFolder)await l.nasConfig.openFolder(d.folderPath);else{const{shell:a}=((s=window.require)==null?void 0:s.call(window,"electron"))||{};a&&await a.openPath(d.folderPath)}}catch{x.error("فشل فتح المجلد")}},className:"px-3 py-1.5 text-[10px] font-bold rounded-lg border transition-all flex items-center gap-1 bg-zinc-500/20 hover:bg-zinc-500/30 text-zinc-300 border-zinc-500/30",children:[e.jsx(V,{size:12}),"فتح المجلد"]})]})]}),d?Ie?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(at,{size:32,className:"text-violet-400 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"جاري تحميل الصور..."})]})}):e.jsxs("div",{className:"flex-1 overflow-y-auto [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:bg-white/10 [&::-webkit-scrollbar-thumb]:rounded-full",onDragOver:Ae,onDragLeave:Me,onDrop:Fe,children:[g&&e.jsxs(N.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"mb-3 bg-zinc-900/80 backdrop-blur-md border border-white/[0.06] rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{size:14,className:"text-violet-400 animate-spin"}),e.jsxs("span",{className:"text-xs text-zinc-300 font-bold",children:[g.current||0," / ",g.total||0," صورة"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[g.startTime&&g.percent>0&&g.percent<100&&e.jsxs("span",{className:"text-[10px] text-zinc-500",children:["~",Math.max(1,Math.round((Date.now()-g.startTime)/g.percent*(100-g.percent)/1e3))," ثانية متبقية"]}),e.jsxs("span",{className:"text-[10px] text-violet-400 font-bold",children:[g.percent,"%"]})]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:e.jsx(N.div,{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 rounded-full",initial:{width:0},animate:{width:`${g.percent}%`},transition:{duration:.3}})}),e.jsx("p",{className:"text-[9px] text-zinc-600 mt-1.5 truncate",children:g.status})]}),$e&&e.jsx("div",{className:"fixed inset-0 z-50 bg-violet-500/10 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-zinc-900/95 border-2 border-dashed border-violet-500 rounded-2xl p-12 text-center",children:[e.jsx(V,{size:48,className:"text-violet-400 mx-auto mb-3"}),e.jsx("p",{className:"text-violet-300 text-lg font-bold",children:"أفلت الصور هنا"}),e.jsx("p",{className:"text-zinc-500 text-xs mt-1",children:"JPG, PNG, HEIC, WebP"})]})}),o.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center border-2 border-dashed border-white/10 rounded-2xl hover:border-violet-500/30 transition-colors cursor-pointer",onClick:ue,children:[e.jsx(V,{size:48,className:"text-zinc-600 mb-4"}),e.jsx("p",{className:"text-zinc-400 text-sm font-bold",children:"اسحب الصور هنا"}),e.jsx("p",{className:"text-zinc-600 text-xs mt-1",children:"أو اضغط لاختيار الصور من الجهاز"}),e.jsx("p",{className:"text-zinc-700 text-[10px] mt-3",children:"JPG, PNG, HEIC, WebP, RAW"})]}):e.jsx("div",{className:"grid grid-cols-5 gap-2",children:o.map(t=>e.jsxs("div",{className:`group relative aspect-[4/3] rounded-xl overflow-hidden cursor-pointer border-2 transition-all ${t.status==="approved"?"border-emerald-500/40":t.status==="rejected"?"border-rose-500/40 opacity-50":t.status==="maybe"?"border-amber-500/40":"border-transparent hover:border-white/10"}`,onClick:()=>{R(o.findIndex(s=>s.id===t.id)),A(1)},children:[e.jsx("img",{src:t.src,alt:t.name,className:"w-full h-full object-cover",loading:"lazy",onError:s=>{const l=s.currentTarget,a=t.localPath?t.localPath.startsWith("file://")?t.localPath:`file://${t.localPath}`:null,c=Array.from(new Set([t.thumbnailUrl,t.cloudUrl,a].filter(Boolean)));let i=new Set;try{i=new Set(JSON.parse(l.dataset.failedSources||"[]"))}catch{i=new Set}l.currentSrc&&i.add(l.currentSrc),l.src&&i.add(l.src),l.dataset.failedSources=JSON.stringify(Array.from(i));const u=c.find(L=>!i.has(L));u?l.src=u:l.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(it,{size:20,className:"text-white"})}),t.status!=="pending"&&e.jsxs("div",{className:`absolute top-1.5 right-1.5 w-5 h-5 rounded-full flex items-center justify-center ${t.status==="approved"?"bg-emerald-500":t.status==="rejected"?"bg-rose-500":"bg-amber-500"}`,children:[t.status==="approved"&&e.jsx(re,{size:10,className:"text-white"}),t.status==="rejected"&&e.jsx(ie,{size:10,className:"text-white"}),t.status==="maybe"&&e.jsx(ne,{size:10,className:"text-white"})]}),t.rating>0&&e.jsxs("div",{className:"absolute bottom-1.5 left-1.5 flex items-center gap-0.5 bg-black/60 px-1.5 py-0.5 rounded-md",children:[e.jsx(Ce,{size:8,className:"text-amber-400 fill-amber-400"}),e.jsx("span",{className:"text-[8px] text-white font-bold",children:t.rating})]}),e.jsxs("div",{className:"absolute bottom-1.5 right-1.5 flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[t.cloudUrl&&e.jsx("button",{onClick:s=>{s.stopPropagation(),navigator.clipboard.writeText(t.cloudUrl),x.success("تم نسخ رابط الصورة")},className:"w-6 h-6 rounded-md bg-blue-500/80 hover:bg-blue-500 flex items-center justify-center transition-colors",title:"نسخ رابط الصورة",children:e.jsx(nt,{size:10,className:"text-white"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),D(t.id,"approved")},className:"w-6 h-6 rounded-md bg-emerald-500/80 hover:bg-emerald-500 flex items-center justify-center transition-colors",children:e.jsx(re,{size:10,className:"text-white"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),D(t.id,"maybe")},className:"w-6 h-6 rounded-md bg-amber-500/80 hover:bg-amber-500 flex items-center justify-center transition-colors",children:e.jsx(ne,{size:10,className:"text-white"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),D(t.id,"rejected")},className:"w-6 h-6 rounded-md bg-rose-500/80 hover:bg-rose-500 flex items-center justify-center transition-colors",children:e.jsx(ie,{size:10,className:"text-white"})})]})]},t.id))})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("p",{className:"text-zinc-500 text-sm mb-4",children:"اختر حجز لعرض صوره:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.map(t=>{var s;return e.jsxs("button",{onClick:()=>he(t),className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-xl hover:border-violet-500/20 hover:bg-violet-500/[0.03] transition-all text-right",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/10 flex items-center justify-center text-violet-400 text-xl font-black mb-3 border border-violet-500/10",children:(s=t.clientName)==null?void 0:s.charAt(0)}),e.jsx("p",{className:"text-white font-bold text-sm truncate",children:t.clientName}),e.jsx("p",{className:"text-zinc-500 text-[10px] truncate mt-0.5",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`text-[9px] font-bold px-2 py-0.5 rounded-full ${t.status===m.SELECTION?"bg-violet-500/10 text-violet-400 border border-violet-500/15":"bg-amber-500/10 text-amber-400 border border-amber-500/15"}`,children:t.status===m.SELECTION?"جاري الاختيار":"بانتظار"}),e.jsx("span",{className:`text-[9px] ${t.nasStatus==="synced"?"text-emerald-400":"text-zinc-600"}`,children:t.nasStatus==="synced"?"الصور منقولة":t.nasStatus==="pending"?"جاري النقل":"لم تنقل"})]})]},t.id)}),h.length===0&&e.jsxs("div",{className:"col-span-3 flex flex-col items-center justify-center py-16 text-zinc-600",children:[e.jsx(V,{size:40,className:"mb-3 opacity-20"}),e.jsx("p",{className:"text-sm font-bold",children:"لا توجد حجوزات للعرض"})]})]})]})]},"gallery"),P==="CHAT"&&e.jsx(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"h-full overflow-hidden rounded-2xl",children:e.jsx(Je,{users:K,currentUser:$})},"chat")]})}),e.jsx(ae,{children:f!==null&&o[f]&&(()=>{const t=o[f];return e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex flex-col items-center",onClick:()=>{R(null),A(1),W(!1)},children:[e.jsxs("div",{className:"w-full flex items-center justify-between px-4 py-3 shrink-0 z-20",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-zinc-300 text-xs font-bold bg-black/40 px-3 py-1.5 rounded-lg",children:[f+1," / ",o.length]}),e.jsxs("span",{className:"text-emerald-400 text-[10px] font-bold bg-emerald-500/10 px-2 py-1 rounded-lg border border-emerald-500/15",children:[T.approved," مقبول"]}),e.jsxs("span",{className:"text-rose-400 text-[10px] font-bold bg-rose-500/10 px-2 py-1 rounded-lg border border-rose-500/15",children:[T.rejected," مرفوض"]})]}),e.jsx("button",{className:"w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors",onClick:()=>{R(null),A(1),W(!1)},children:e.jsx(ot,{size:18})})]}),e.jsxs("div",{className:"flex-1 relative flex items-center justify-center w-full min-h-0 px-14",children:[e.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-xl bg-white/5 hover:bg-white/10 flex items-center justify-center text-white transition-colors z-10",onClick:s=>{s.stopPropagation(),pe("prev")},children:e.jsx(ct,{size:20})}),e.jsx("button",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-xl bg-white/5 hover:bg-white/10 flex items-center justify-center text-white transition-colors z-10",onClick:s=>{s.stopPropagation(),pe("next")},children:e.jsx(dt,{size:20})}),e.jsxs("div",{className:"relative overflow-hidden rounded-lg",style:{maxWidth:"82vw",maxHeight:"100%"},onClick:s=>s.stopPropagation(),onMouseMove:s=>{if(I>1){const l=s.currentTarget.getBoundingClientRect(),a=(s.clientX-l.left)/l.width*100,c=(s.clientY-l.top)/l.height*100;X({x:a,y:c})}},onWheel:s=>{s.stopPropagation();const l=s.currentTarget.getBoundingClientRect(),a=(s.clientX-l.left)/l.width*100,c=(s.clientY-l.top)/l.height*100,i=s.deltaY>0?-.3:.3,u=Math.min(Math.max(I+i,1),5);u!==I&&(X({x:a,y:c}),A(u))},children:[e.jsx(N.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},src:t.src,alt:t.name,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${I})`,transformOrigin:`${ce.x}% ${ce.y}%`,cursor:I>1?"grab":"default",transition:"transform 0.15s ease-out"},draggable:!1},t.id),I>1&&e.jsxs("div",{className:"absolute top-3 left-3 text-[10px] font-bold text-white/60 bg-black/40 px-2 py-1 rounded-md pointer-events-none",children:[Math.round(I*100),"%"]})]})]}),e.jsx("div",{className:"w-full max-w-3xl mx-auto shrink-0 px-4 py-3 z-10",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-3 bg-zinc-900/90 backdrop-blur-xl rounded-2xl border border-white/10 px-5 py-2.5",children:[e.jsx("span",{className:"text-zinc-400 text-[10px] font-medium ml-2 truncate max-w-[120px]",children:t.name}),e.jsx("div",{className:"flex items-center gap-0.5 border-r border-white/10 pr-3",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>Ge(t.id,s),className:"p-0.5 transition-transform hover:scale-125",children:e.jsx(Ce,{size:14,className:`${s<=(t.rating||0)?"text-amber-400 fill-amber-400":"text-zinc-600"} transition-colors`})},s))}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>D(t.id,"approved"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${t.status==="approved"?"bg-emerald-500 text-white":"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/20"}`,children:[e.jsx(re,{size:11,className:"inline-block ml-1"}),"مقبول"]}),e.jsxs("button",{onClick:()=>D(t.id,"maybe"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${t.status==="maybe"?"bg-amber-500 text-white":"bg-amber-500/10 text-amber-400 hover:bg-amber-500/20 border border-amber-500/20"}`,children:[e.jsx(ne,{size:11,className:"inline-block ml-1"}),"ربما"]}),e.jsxs("button",{onClick:()=>D(t.id,"rejected"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${t.status==="rejected"?"bg-rose-500 text-white":"bg-rose-500/10 text-rose-400 hover:bg-rose-500/20 border border-rose-500/20"}`,children:[e.jsx(ie,{size:11,className:"inline-block ml-1"}),"مرفوض"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>W(!ee),className:`px-2 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${ee||t.tags.length>0?"bg-violet-500/20 text-violet-300 border-violet-500/20":"bg-white/5 text-zinc-400 border-white/10 hover:bg-white/10"}`,children:[e.jsx(xt,{size:12,className:"inline-block ml-0.5"}),t.tags.length>0?`تاقات (${t.tags.length})`:"تاقات"]}),e.jsx(ae,{children:ee&&e.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full mb-2 left-0 w-72 bg-zinc-900/95 backdrop-blur-xl rounded-xl border border-white/10 shadow-2xl overflow-hidden z-30",dir:"rtl",children:e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-[10px] text-zinc-500 font-bold mb-2",children:"التعديلات المطلوبة"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Re.map(s=>e.jsx("button",{onClick:()=>se(t.id,s),className:`px-2 py-1 rounded-md text-[9px] font-bold transition-all ${t.tags.includes(s)?"bg-violet-500 text-white":"bg-white/5 text-zinc-400 hover:bg-white/10 border border-white/5"}`,children:s},s))}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx("input",{type:"text",value:B,onChange:s=>de(s.target.value),onKeyDown:s=>{s.key==="Enter"&&fe()},placeholder:"أضف تاق جديد...",className:"flex-1 h-7 px-2 bg-white/[0.03] border border-white/[0.06] rounded-md text-[9px] text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-violet-500/30",dir:"rtl"}),e.jsx("button",{onClick:fe,disabled:!B.trim(),className:"h-7 px-2 bg-violet-500/15 hover:bg-violet-500/25 text-violet-300 text-[9px] font-bold rounded-md border border-violet-500/15 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"+"})]})]})})})]})]})}),e.jsx("div",{className:"w-full max-w-3xl mx-auto shrink-0 px-4 pb-4 z-10",onClick:s=>s.stopPropagation(),children:e.jsx("textarea",{value:t.note,onChange:s=>He(t.id,s.target.value),placeholder:"أضف ملاحظة للمصمم...",className:"w-full h-16 bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-xl p-3 text-xs text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-violet-500/30 resize-none",dir:"rtl"})})]})})()})]})},ut=({booking:n,index:$,onStartSelection:K,onFinishSelection:z,onOpenGallery:P})=>{var k,H;const w=n.status===m.SELECTION,d=n.status===m.SHOOTING_COMPLETED,C=n.status===m.EDITING;return e.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:$*.04},className:`group relative rounded-xl border p-3.5 transition-all duration-200 ${w?"bg-gradient-to-bl from-violet-500/[0.08] to-fuchsia-500/[0.04] border-violet-500/20 shadow-lg shadow-violet-500/5":C?"bg-emerald-500/[0.03] border-emerald-500/10":"bg-white/[0.015] border-white/[0.05] hover:border-white/[0.08]"}`,children:[w&&e.jsxs("div",{className:"absolute top-2.5 left-2.5 flex items-center gap-1 px-2 py-0.5 bg-violet-500/15 border border-violet-500/20 rounded-full",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 animate-pulse"}),e.jsx("span",{className:"text-[8px] font-black text-violet-300",children:"جاري الاختيار"})]}),C&&e.jsxs("div",{className:"absolute top-2.5 left-2.5 flex items-center gap-1 px-2 py-0.5 bg-emerald-500/15 border border-emerald-500/20 rounded-full",children:[e.jsx(Z,{size:9,className:"text-emerald-400"}),e.jsx("span",{className:"text-[8px] font-black text-emerald-300",children:"تم الإرسال"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-lg font-black shrink-0 ${w?"bg-gradient-to-br from-violet-500 to-fuchsia-500 text-white shadow-lg shadow-violet-500/20":n.category===we.WEDDING?"bg-rose-500/10 text-rose-400 border border-rose-500/10":"bg-blue-500/10 text-blue-400 border border-blue-500/10"}`,children:((k=n.clientName)==null?void 0:k.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-bold text-sm truncate",children:n.clientName}),e.jsx("p",{className:"text-zinc-500 text-[10px] mt-0.5 truncate",children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsxs("span",{className:"flex items-center gap-1 text-[9px] text-zinc-500",children:[e.jsx(mt,{size:9}),(H=n.shootDate)==null?void 0:H.split("T")[0]]}),n.category===we.WEDDING&&e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 bg-rose-500/10 text-rose-400 rounded-full font-bold border border-rose-500/10",children:"عرس"}),e.jsxs("span",{className:`text-[8px] font-bold flex items-center gap-0.5 ${n.nasStatus==="synced"?"text-emerald-400":n.nasStatus==="pending"?"text-amber-400":"text-zinc-600"}`,children:[e.jsx(Ee,{size:8}),n.nasStatus==="synced"?"منقول":n.nasStatus==="pending"?"جاري النقل":"لم ينقل"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 shrink-0",children:[d&&e.jsx("button",{onClick:()=>K(n),className:"px-3 py-1.5 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-600 hover:to-fuchsia-600 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-violet-500/15 transition-all hover:shadow-violet-500/25",children:"بدء الاختيار"}),w&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(n),className:"px-3 py-1.5 bg-white/[0.05] hover:bg-white/[0.08] text-white text-[10px] font-bold rounded-lg border border-white/[0.08] transition-all",children:"فتح المعرض"}),e.jsx("button",{onClick:()=>z(n),className:"px-3 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/15 text-emerald-400 text-[10px] font-bold rounded-lg border border-emerald-500/15 transition-all",children:"إنهاء وإرسال"})]})]})]}),!C&&e.jsxs("div",{className:"mt-2.5 pt-2 border-t border-white/[0.03] flex items-center gap-2",children:[n.clientPhone&&e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[e.jsx(ke,{size:9,className:"text-zinc-600 shrink-0"}),e.jsx("span",{className:"text-[9px] text-zinc-500 truncate",children:n.clientPhone})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:y=>{y.stopPropagation();const E=n.client_token;if(!E){x.error("لا يوجد token لهذا الحجز. يرجى تحديث بيانات الحجز أولاً");return}const o=ye(E);navigator.clipboard.writeText(o),x.success("تم نسخ رابط الألبوم")},className:"w-7 h-7 rounded-lg bg-blue-500/10 hover:bg-blue-500/20 flex items-center justify-center text-blue-400 transition-colors border border-blue-500/10",title:"نسخ رابط الألبوم",children:e.jsx(ht,{size:11})}),n.clientPhone&&e.jsx("button",{onClick:y=>{y.stopPropagation();const E=n.client_token;if(!E){x.error("لا يوجد token لهذا الحجز. يرجى تحديث بيانات الحجز أولاً");return}const o=ye(E),b=`مرحباً ${n.clientName}، رابط صورك:

${o}`,f=n.clientPhone.replace(/[^0-9+]/g,"");window.open(`https://wa.me/${f}?text=${encodeURIComponent(b)}`,"_blank")},className:"w-7 h-7 rounded-lg bg-[#25D366]/10 hover:bg-[#25D366]/20 flex items-center justify-center text-[#25D366] transition-colors border border-[#25D366]/10",title:"إرسال عبر واتساب",children:e.jsx(Pe,{size:11})})]})]})]})};export{wt as default};
