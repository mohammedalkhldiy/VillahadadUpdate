import{j as r,R as g,g as Pe,r as N,A as mt}from"./vendor-react-Ce27NbrU.js";import{D}from"./ManagerDashboardCard-CvhNOwym.js";import{u as pt,p as Se,b as xe,A as ht}from"./index-BFvmHygk.js";import{K as ke,af as ee,aw as gt,ay as yt,az as vt,c as He,av as bt,aA as jt,aB as fe,ah as Nt,ag as wt,aC as Ae,w as Pt,v as qe,d as Ge,x as kt,m as z,aD as Ye,e as Oe,ae as Ot,k as ve,a as Ze,as as St,aE as At,aF as _t,b as Et,aG as Dt,a6 as Tt,ab as $t,y as Ct,U as Mt,A as Rt,O as It,aH as Lt,X as zt}from"./vendor-ui-TjLGESBy.js";import{f as k,p as E,r as Xe,a as Bt,b as Je,c as Wt,i as V,T as et,L as C,d as tt,e as Ft,D as rt,g as se,h as Ut,j as Vt,G as Kt,k as _e,l as Qt,m as Ee,n as Ht,o as qt,R as Gt,q as Yt}from"./generateCategoricalChart-NQEqos2u.js";import{c as at}from"./clsx-B-dksMZM.js";import{f as G,b as me,s as Zt,i as De}from"./vendor-utils-DKqDJWuS.js";import{CurrentUserService as Xt}from"./CurrentUserService-BpRsn01f.js";import"./vendor-supabase-CSCOup90.js";const Jt=()=>{const{currentUser:t}=pt(),e=(t==null?void 0:t.name)||"سرى حداد",a=(t==null?void 0:t.jobTitle)||(t==null?void 0:t.role)||"Manager",n=(t==null?void 0:t.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random`,s=n&&(n.startsWith("bg-")||n.startsWith("content-"));return r.jsxs(D,{noPadding:!0,className:"h-[250px] p-0 overflow-hidden relative group",children:[r.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[s?r.jsx("div",{className:`w-full h-full ${n} flex items-center justify-center text-6xl font-bold text-white/20 transition-all duration-700 group-hover:scale-105`,children:e.charAt(0)}):r.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover object-top transition-all duration-700 group-hover:scale-105 group-hover:brightness-110",onError:i=>{i.currentTarget.src="https://ui-avatars.com/api/?name="+e+"&background=random"}}),r.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none",children:[r.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-amber-400/20 via-transparent to-white/10 mix-blend-overlay"}),r.jsx("div",{className:"absolute -inset-10 bg-[radial-gradient(circle_at_50%_0%,rgba(255,255,255,0.15),transparent_70%)] blur-2xl"})]}),r.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/80 via-black/20 to-transparent opacity-90 transition-opacity group-hover:opacity-70"})]}),r.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-5 z-10 transition-transform duration-500 group-hover:-translate-y-1",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-0.5 drop-shadow-lg",children:e}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),r.jsx("p",{className:"text-xs text-gray-300 font-medium tracking-wide uppercase drop-shadow-md",children:a})]})]})]})};var er=["points","className","baseLinePoints","connectNulls"];function K(){return K=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},K.apply(this,arguments)}function tr(t,e){if(t==null)return{};var a=rr(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function rr(t,e){if(t==null)return{};var a={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function Te(t){return ir(t)||sr(t)||nr(t)||ar()}function ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(t,e){if(t){if(typeof t=="string")return be(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return be(t,e)}}function sr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ir(t){if(Array.isArray(t))return be(t)}function be(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var $e=function(e){return e&&e.x===+e.x&&e.y===+e.y},or=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(n){$e(n)?a[a.length-1].push(n):a[a.length-1].length>0&&a.push([])}),$e(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},Y=function(e,a){var n=or(e);a&&(n=[n.reduce(function(i,o){return[].concat(Te(i),Te(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,c,l){return"".concat(o).concat(l===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},lr=function(e,a,n){var s=Y(e,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Y(a.reverse(),n).slice(1))},nt=function(e){var a=e.points,n=e.className,s=e.baseLinePoints,i=e.connectNulls,o=tr(e,er);if(!a||!a.length)return null;var c=at("recharts-polygon",n);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",d=lr(a,s,i);return g.createElement("g",{className:c},g.createElement("path",K({},k(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),l?g.createElement("path",K({},k(o,!0),{fill:"none",d:Y(a,i)})):null,l?g.createElement("path",K({},k(o,!0),{fill:"none",d:Y(s,i)})):null)}var m=Y(a,i);return g.createElement("path",K({},k(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:c,d:m}))},cr=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function X(t){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(t)}function dr(t,e){if(t==null)return{};var a=ur(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ur(t,e){if(t==null)return{};var a={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function M(){return M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},M.apply(this,arguments)}function Ce(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function J(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ce(Object(a),!0).forEach(function(n){xr(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function xr(t,e,a){return e=fr(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fr(t){var e=mr(t,"string");return X(e)=="symbol"?e:String(e)}function mr(t,e){if(X(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(X(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pr=function(e,a,n,s){var i="";return s.forEach(function(o,c){var l=E(a,n,e,o);c?i+="L ".concat(l.x,",").concat(l.y):i+="M ".concat(l.x,",").concat(l.y)}),i+="Z",i},hr=function(e){var a=e.cx,n=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var l=J({stroke:"#ccc"},k(e,!1));return g.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(d){var m=E(a,n,s,d),u=E(a,n,i,d);return g.createElement("line",M({},l,{key:"line-".concat(d),x1:m.x,y1:m.y,x2:u.x,y2:u.y}))}))},gr=function(e){var a=e.cx,n=e.cy,s=e.radius,i=e.index,o=J(J({stroke:"#ccc"},k(e,!1)),{},{fill:"none"});return g.createElement("circle",M({},o,{className:"recharts-polar-grid-concentric-circle",key:"circle-".concat(i),cx:a,cy:n,r:s}))},yr=function(e){var a=e.radius,n=e.index,s=J(J({stroke:"#ccc"},k(e,!1)),{},{fill:"none"});return g.createElement("path",M({},s,{className:"recharts-polar-grid-concentric-polygon",key:"path-".concat(n),d:pr(a,e.cx,e.cy,e.polarAngles)}))},vr=function(e){var a=e.polarRadius,n=e.gridType;return!a||!a.length?null:g.createElement("g",{className:"recharts-polar-grid-concentric"},a.map(function(s,i){var o=i;return n==="circle"?g.createElement(gr,M({key:o},e,{radius:s,index:i})):g.createElement(yr,M({key:o},e,{radius:s,index:i}))}))},st=function(e){var a=e.cx,n=a===void 0?0:a,s=e.cy,i=s===void 0?0:s,o=e.innerRadius,c=o===void 0?0:o,l=e.outerRadius,d=l===void 0?0:l,m=e.gridType,u=m===void 0?"polygon":m,h=e.radialLines,j=h===void 0?!0:h,b=dr(e,cr);return d<=0?null:g.createElement("g",{className:"recharts-polar-grid"},g.createElement(hr,M({cx:n,cy:i,innerRadius:c,outerRadius:d,gridType:u,radialLines:j},b)),g.createElement(vr,M({cx:n,cy:i,innerRadius:c,outerRadius:d,gridType:u,radialLines:j},b)))};st.displayName="PolarGrid";var pe,Me;function br(){if(Me)return pe;Me=1;var t=Xe(),e=Bt(),a=Je();function n(s,i){return s&&s.length?t(s,a(i,2),e):void 0}return pe=n,pe}var jr=br();const Nr=Pe(jr);var he,Re;function wr(){if(Re)return he;Re=1;var t=Xe(),e=Je(),a=Wt();function n(s,i){return s&&s.length?t(s,e(i,2),a):void 0}return he=n,he}var Pr=wr();const kr=Pe(Pr);var Or=["cx","cy","angle","ticks","axisLine"],Sr=["ticks","tick","angle","tickFormatter","stroke"];function Q(t){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(t)}function Z(){return Z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Z.apply(this,arguments)}function Ie(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function R(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ie(Object(a),!0).forEach(function(n){de(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Le(t,e){if(t==null)return{};var a=Ar(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ar(t,e){if(t==null)return{};var a={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function _r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function Er(t,e,a){return e&&ze(t.prototype,e),a&&ze(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dr(t,e,a){return e=ie(e),Tr(t,it()?Reflect.construct(e,a||[],ie(t).constructor):e.apply(t,a))}function Tr(t,e){if(e&&(Q(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $r(t)}function $r(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(it=function(){return!!t})()}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ie(t)}function Cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e)}function je(t,e){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},je(t,e)}function de(t,e,a){return e=ot(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ot(t){var e=Mr(t,"string");return Q(e)=="symbol"?e:String(e)}function Mr(t,e){if(Q(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(Q(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var te=(function(t){Cr(e,t);function e(){return _r(this,e),Dr(this,e,arguments)}return Er(e,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,c=i.cx,l=i.cy;return E(c,l,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,c=n.ticks,l=Nr(c,function(m){return m.coordinate||0}),d=kr(c,function(m){return m.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,c=n.ticks,l=n.axisLine,d=Le(n,Or),m=c.reduce(function(b,f){return[Math.min(b[0],f.coordinate),Math.max(b[1],f.coordinate)]},[1/0,-1/0]),u=E(s,i,m[0],o),h=E(s,i,m[1],o),j=R(R(R({},k(d,!1)),{},{fill:"none"},k(l,!1)),{},{x1:u.x,y1:u.y,x2:h.x,y2:h.y});return g.createElement("line",Z({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,c=s.angle,l=s.tickFormatter,d=s.stroke,m=Le(s,Sr),u=this.getTickTextAnchor(),h=k(m,!1),j=k(o,!1),b=i.map(function(f,y){var p=n.getTickValueCoord(f),v=R(R(R(R({textAnchor:u,transform:"rotate(".concat(90-c,", ").concat(p.x,", ").concat(p.y,")")},h),{},{stroke:"none",fill:d},j),{},{index:y},p),{},{payload:f});return g.createElement(C,Z({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(f.coordinate)},tt(n.props,f,y)),e.renderTickItem(o,v,l?l(f.value,y):f.value))});return g.createElement(C,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:g.createElement(C,{className:"recharts-polar-radius-axis"},i&&this.renderAxisLine(),o&&this.renderTicks(),Ft.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return g.isValidElement(n)?o=g.cloneElement(n,s):V(n)?o=n(s):o=g.createElement(et,Z({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}]),e})(N.PureComponent);de(te,"displayName","PolarRadiusAxis");de(te,"axisType","radiusAxis");de(te,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function H(t){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(t)}function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},L.apply(this,arguments)}function Be(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Be(Object(a),!0).forEach(function(n){ue(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Be(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Rr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function We(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ct(n.key),n)}}function Ir(t,e,a){return e&&We(t.prototype,e),a&&We(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lr(t,e,a){return e=oe(e),zr(t,lt()?Reflect.construct(e,a||[],oe(t).constructor):e.apply(t,a))}function zr(t,e){if(e&&(H(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Br(t)}function Br(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lt=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},oe(t)}function Wr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ne(t,e)}function ue(t,e,a){return e=ct(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ct(t){var e=Fr(t,"string");return H(e)=="symbol"?e:String(e)}function Fr(t,e){if(H(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(H(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ur=Math.PI/180,Fe=1e-5,re=(function(t){Wr(e,t);function e(){return Rr(this,e),Lr(this,e,arguments)}return Ir(e,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,c=s.radius,l=s.orientation,d=s.tickSize,m=d||8,u=E(i,o,c,n.coordinate),h=E(i,o,c+(l==="inner"?-1:1)*m,n.coordinate);return{x1:u.x,y1:u.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*Ur),o;return i>Fe?o=s==="outer"?"start":"end":i<-Fe?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,c=n.axisLine,l=n.axisLineType,d=I(I({},k(this.props,!1)),{},{fill:"none"},k(c,!1));if(l==="circle")return g.createElement(rt,L({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var m=this.props.ticks,u=m.map(function(h){return E(s,i,o,h.coordinate)});return g.createElement(nt,L({className:"recharts-polar-angle-axis-line"},d,{points:u}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,c=s.tickLine,l=s.tickFormatter,d=s.stroke,m=k(this.props,!1),u=k(o,!1),h=I(I({},m),{},{fill:"none"},k(c,!1)),j=i.map(function(b,f){var y=n.getTickLineCoord(b),p=n.getTickTextAnchor(b),v=I(I(I({textAnchor:p},m),{},{stroke:"none",fill:d},u),{},{index:f,payload:b,x:y.x2,y:y.y2});return g.createElement(C,L({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(b.coordinate)},tt(n.props,b,f)),c&&g.createElement("line",L({className:"recharts-polar-angle-axis-tick-line"},h,y)),o&&e.renderTickItem(o,v,l?l(b.value,f):b.value))});return g.createElement(C,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:g.createElement(C,{className:"recharts-polar-angle-axis"},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return g.isValidElement(n)?o=g.cloneElement(n,s):V(n)?o=n(s):o=g.createElement(et,L({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}]),e})(N.PureComponent);ue(re,"displayName","PolarAngleAxis");ue(re,"axisType","angleAxis");ue(re,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ge,Ue;function Vr(){if(Ue)return ge;Ue=1;function t(e){return e&&e.length?e[0]:void 0}return ge=t,ge}var ye,Ve;function Kr(){return Ve||(Ve=1,ye=Vr()),ye}var Qr=Kr();const Hr=Pe(Qr);function q(t){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(t)}function le(){return le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},le.apply(this,arguments)}function Ke(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ke(Object(a),!0).forEach(function(n){$(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qe(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ut(n.key),n)}}function Gr(t,e,a){return e&&Qe(t.prototype,e),a&&Qe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yr(t,e,a){return e=ce(e),Zr(t,dt()?Reflect.construct(e,a||[],ce(t).constructor):e.apply(t,a))}function Zr(t,e){if(e&&(q(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(t)}function dt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dt=function(){return!!t})()}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ce(t)}function U(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},we(t,e)}function $(t,e,a){return e=ut(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ut(t){var e=Jr(t,"string");return q(e)=="symbol"?e:String(e)}function Jr(t,e){if(q(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(q(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ae=(function(t){Xr(e,t);function e(){var a;qr(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=Yr(this,e,[].concat(s)),$(U(a),"state",{isAnimationFinished:!1}),$(U(a),"handleAnimationEnd",function(){var o=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),V(o)&&o()}),$(U(a),"handleAnimationStart",function(){var o=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),V(o)&&o()}),$(U(a),"handleMouseEnter",function(o){var c=a.props.onMouseEnter;c&&c(a.props,o)}),$(U(a),"handleMouseLeave",function(o){var c=a.props.onMouseLeave;c&&c(a.props,o)}),a}return Gr(e,[{key:"renderDots",value:function(n){var s=this.props,i=s.dot,o=s.dataKey,c=k(this.props,!1),l=k(i,!0),d=n.map(function(m,u){var h=S(S(S({key:"dot-".concat(u),r:3},c),l),{},{dataKey:o,cx:m.x,cy:m.y,index:u,payload:m});return e.renderDotItem(i,h)});return g.createElement(C,{className:"recharts-radar-dots"},d)}},{key:"renderPolygonStatically",value:function(n){var s=this.props,i=s.shape,o=s.dot,c=s.isRange,l=s.baseLinePoints,d=s.connectNulls,m;return g.isValidElement(i)?m=g.cloneElement(i,S(S({},this.props),{},{points:n})):V(i)?m=i(S(S({},this.props),{},{points:n})):m=g.createElement(nt,le({},k(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?l:null,connectNulls:d})),g.createElement(C,{className:"recharts-radar-polygon"},m,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,c=s.animationBegin,l=s.animationDuration,d=s.animationEasing,m=s.animationId,u=this.state.prevPoints;return g.createElement(mt,{begin:c,duration:l,isActive:o,easing:d,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var j=h.t,b=u&&u.length/i.length,f=i.map(function(y,p){var v=u&&u[Math.floor(p*b)];if(v){var x=se(v.x,y.x),O=se(v.y,y.y);return S(S({},y),{},{x:x(j),y:O(j)})}var P=se(y.cx,y.x),_=se(y.cy,y.y);return S(S({},y),{},{x:P(j),y:_(j)})});return n.renderPolygonStatically(f)})}},{key:"renderPolygon",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&s&&s.length&&!o&&(!c||!Ut(c,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(s||!o||!o.length)return null;var l=this.state.isAnimationFinished,d=at("recharts-radar",i);return g.createElement(C,{className:d},this.renderPolygon(),(!c||l)&&Vt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,s){var i;return g.isValidElement(n)?i=g.cloneElement(n,s):V(n)?i=n(s):i=g.createElement(rt,le({},s,{className:"recharts-radar-dot"})),i}}]),e})(N.PureComponent);$(ae,"displayName","Radar");$(ae,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Kt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});$(ae,"getComposedData",function(t){var e=t.radiusAxis,a=t.angleAxis,n=t.displayedData,s=t.dataKey,i=t.bandSize,o=a.cx,c=a.cy,l=!1,d=[],m=a.type!=="number"?i??0:0;n.forEach(function(h,j){var b=_e(h,a.dataKey,j),f=_e(h,s),y=a.scale(b)+m,p=Array.isArray(f)?Qt(f):f,v=Ee(p)?void 0:e.scale(p);Array.isArray(f)&&f.length>=2&&(l=!0),d.push(S(S({},E(o,c,v,y)),{},{name:b,value:f,cx:o,cy:c,radius:v,angle:y,payload:h}))});var u=[];return l&&d.forEach(function(h){if(Array.isArray(h.value)){var j=Hr(h.value),b=Ee(j)?void 0:e.scale(j);u.push(S(S({},h),{},{radius:b},E(o,c,b,h.angle)))}else u.push(h)}),{points:d,isRange:l,baseLinePoints:u}});var ea=Ht({chartName:"RadarChart",GraphicalChild:ae,axisComponents:[{axisType:"angleAxis",AxisComp:re},{axisType:"radiusAxis",AxisComp:te}],formatAxisMap:qt,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ta=({bookings:t=[]})=>{const e={},a={};let n=0;try{t.filter(d=>!d.deletedAt).forEach(d=>{const m=d.paidAmount||0,u=d.category||"other";d.currency==="USD"?e[u]=(e[u]||0)+m:a[u]=(a[u]||0)+m})}catch(l){console.error("[Revenue Widget] Error calculating revenue:",l)}const i=Object.keys(a).length>=Object.keys(e).length?a:e,o={wedding:"زفاف",Wedding:"زفاف",studio:"جلسات",Studio:"جلسات",commercial:"تجاري",Commercial:"تجاري",video:"فيديو",Video:"فيديو",location:"تأجير موقع",Location:"تأجير موقع",other:"أخرى"},c=Object.keys(i).map(l=>({subject:o[l]||l,value:i[l],fullMark:0}));return n=Math.max(...c.map(l=>l.value),1e3),c.forEach(l=>l.fullMark=n),c.length===0&&c.push({subject:"No Data",value:0,fullMark:100}),r.jsxs(D,{className:"bg-white/60 dark:bg-[#1a1c22]/60 backdrop-blur-md text-gray-900 dark:text-white flex flex-col h-[220px] relative overflow-hidden",dir:"rtl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10 px-2 pt-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold font-tajawal text-amber-500",children:"مصادر الدخل"}),r.jsx("p",{className:"text-[10px] text-gray-400 font-tajawal",children:"تحليل الأداء المالي"})]}),r.jsx("div",{className:"bg-amber-500/10 p-1.5 rounded-lg",children:r.jsx(ke,{size:16,className:"text-amber-500"})})]}),r.jsx("div",{className:"flex-1 w-full relative z-10 -ml-2 -mt-2",children:r.jsx(Gt,{width:"100%",height:"100%",children:r.jsxs(ea,{cx:"50%",cy:"50%",outerRadius:"80%",data:c,children:[r.jsx(st,{stroke:"#374151"}),r.jsx(re,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontFamily:"Tajawal",fontWeight:"bold"}}),r.jsx(te,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),r.jsx(ae,{name:"Revenue",dataKey:"value",stroke:"#f59e0b",strokeWidth:3,fill:"#f59e0b",fillOpacity:.5}),r.jsx(Yt,{contentStyle:{backgroundColor:"#111827",borderRadius:"8px",border:"none",fontSize:"12px"},itemStyle:{color:"#fbbf24"}})]})})}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-amber-500/10 blur-[60px] rounded-full pointer-events-none"})]})},ra=({users:t=[]})=>{const[e,a]=N.useState([]);N.useEffect(()=>{const o=Se.getOnlineUsers();o.length>0&&a(o);const c=Se.subscribe(l=>{a(l)});return()=>{c()}},[]);const n=new Set(e.map(o=>o.id)),s=t.filter(o=>o&&o.name).map(o=>({name:o.name,status:n.has(o.id)?"available":"offline",task:o.role}));s.sort((o,c)=>o.status==="available"&&c.status!=="available"?-1:o.status!=="available"&&c.status==="available"?1:0);const i=s.filter(o=>o.status==="available").length;return r.jsxs(D,{className:"bg-white/60 dark:bg-[#1a1c22]/60 backdrop-blur-md border-none shadow-sm h-[160px] flex flex-col pt-3",dir:"rtl",style:{minHeight:"160px",maxHeight:"160px"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0 px-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ee,{size:16,className:"text-gray-400 dark:text-gray-500"}),r.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 font-tajawal",children:"نشاط الفريق"})]}),r.jsxs("span",{className:"text-[10px] text-gray-500 font-bold bg-gray-50 px-2 py-0.5 rounded-full",children:[i," متصلين"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 pb-1",children:r.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:s.map((o,c)=>r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 dark:border-white/5 pb-1.5 group hover:bg-white/50 dark:hover:bg-white/5 transition-all px-1",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${o.status==="available"?"bg-green-500":"bg-red-400 opacity-50"}`}),r.jsx("span",{className:`text-[11px] font-bold font-tajawal truncate ${o.status==="available"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}`,children:o.name})]}),r.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-tajawal truncate text-left max-w-[60px]",children:o.task})]},c))})})]})},aa=()=>r.jsxs(D,{className:"relative overflow-hidden group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center text-amber-600",children:r.jsx(gt,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold font-tajawal text-gray-800",children:"طقس بغداد"}),r.jsx("p",{className:"text-[10px] text-gray-500 font-tajawal",children:"صافي ومناسب للتصوير"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"24°"}),r.jsx("p",{className:"text-[10px] text-gray-500 font-mono",children:"C°"})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2 p-3 bg-gray-50 rounded-2xl ",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{size:14,className:"text-orange-500"}),r.jsx("span",{className:"text-[10px] font-bold font-mono text-gray-600",children:"06:42 AM"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vt,{size:14,className:"text-indigo-500"}),r.jsx("span",{className:"text-[10px] font-bold font-mono text-gray-600",children:"05:15 PM"})]})]})]}),na=()=>r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(aa,{}),r.jsxs(D,{className:"bg-[#303030] text-white p-4 group/opp",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-sm font-bold font-tajawal",children:"تنبيهات الفرص"}),r.jsxs("div",{className:"text-3xl font-bold font-mono",children:["0",r.jsx("span",{className:"text-gray-600",children:"/0"})]})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-gray-500 gap-2",children:[r.jsx(He,{size:20,className:"text-amber-500/30"}),r.jsx("p",{className:"text-xs font-tajawal",children:"لا توجد فرص متاحة حالياً"})]})]})]}),sa=()=>{const[t,e]=N.useState("");g.useEffect(()=>{const n=localStorage.getItem("manager_strategic_note");n&&e(n)},[]);const a=n=>{e(n),localStorage.setItem("manager_strategic_note",n)};return r.jsxs(D,{className:"bg-[#fbbf24] text-gray-900 border-none relative overflow-hidden h-[283px] shadow-2xl flex flex-col p-0 group",dir:"rtl",style:{minHeight:"283px",maxHeight:"283px"},children:[r.jsx("div",{className:"h-6 bg-amber-500/20 absolute top-0 left-0 right-0 z-10"}),r.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/30 to-transparent pointer-events-none"}),r.jsx("div",{className:"p-4 pt-8 pb-1 relative z-20 flex justify-between items-center",children:r.jsxs("h3",{className:"text-sm font-bold text-amber-900/80 font-tajawal flex items-center gap-2",children:[r.jsx(He,{size:14}),"مفكرة استراتيجية"]})}),r.jsx("div",{className:"flex-1 p-4 pt-2 relative z-20 flex flex-col overflow-hidden",children:r.jsx("textarea",{value:t,onChange:n=>a(n.target.value),className:"w-full flex-1 bg-transparent resize-none focus:outline-none text-sm leading-relaxed font-handwriting text-gray-800 placeholder:text-gray-900/30 custom-scrollbar",placeholder:"اكتب ملاحظاتك وأفكارك هنا...",dir:"rtl"})}),r.jsx("div",{className:"absolute top-0 right-1/2 translate-x-1/2 w-16 h-8 bg-white/40 -translate-y-1/2 rotate-3 backdrop-blur-sm border border-white/20 z-30"}),r.jsxs("div",{className:"p-3 pt-0 flex justify-between items-center opacity-40 group-hover:opacity-100 transition-opacity",children:[r.jsx("span",{className:"text-[9px] font-mono font-bold tracking-tighter",children:"NI-STRAT-X"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(bt,{size:12,className:"cursor-pointer hover:text-red-700 transition-colors",onClick:()=>e("")}),r.jsx(jt,{size:12,className:"cursor-pointer"})]})]})]})},ia=({bookings:t=[]})=>{const[e,a]=N.useState(!0),n=new Date().getFullYear(),s=new Date().getMonth(),i=g.useMemo(()=>{let c=0,l=0,d=0,m=0,u=0,h=0,j=0,b=0,f=0,y=0,p=0,v=0,x=0;t.forEach(w=>{if(w.deletedAt)return;const A=w.shootDate?new Date(w.shootDate):null;if(!A||isNaN(A.getTime()))return;v++;const W=w.currency==="USD",ne=w.totalAmount||0,F=w.paidAmount||0;W?(c+=ne,d+=F):(l+=ne,m+=F),A.getFullYear()===n&&A.getMonth()===s&&(p++,W?(u+=ne,j+=F):(h+=ne,b+=F));const xt=s===0?11:s-1,ft=s===0?n-1:n;A.getFullYear()===ft&&A.getMonth()===xt&&(W?f+=F:y+=F),(w.status==="Completed"||w.status==="completed"||w.status==="Delivered")&&x++,w.addOnTotal&&w.addOnTotal>0&&(W?(l+=w.addOnTotal,h+=(A==null?void 0:A.getMonth())===s?w.addOnTotal:0):(c+=w.addOnTotal,u+=(A==null?void 0:A.getMonth())===s?w.addOnTotal:0))});const O=f>0?(j-f)/f*100:0,P=y>0?(b-y)/y*100:0,_=c-d,T=l-m,B=c+l>0?Math.round((d+m)/(c+l)*100):0;return{totalUSD:c,totalIQD:l,paidUSD:d,paidIQD:m,monthUSD:u,monthIQD:h,monthPaidUSD:j,monthPaidIQD:b,remainingUSD:_,remainingIQD:T,trendUSD:O,trendIQD:P,monthCount:p,totalCount:v,completedCount:x,collectionRate:B}},[t,n,s]),o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];return r.jsxs(D,{className:"bg-[#1a1c22] text-white h-[220px] flex flex-col relative overflow-hidden",dir:"rtl",children:[r.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-emerald-500/5 rounded-full blur-[60px] -translate-y-1/2 -translate-x-1/2 pointer-events-none"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full blur-[60px] translate-y-1/2 translate-x-1/2 pointer-events-none"}),r.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center",children:r.jsx(fe,{size:16,className:"text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-black text-white",children:"الإيرادات"}),r.jsxs("p",{className:"text-[9px] text-gray-500",children:[o[s]," ",n]})]})]}),r.jsx("button",{onClick:()=>a(!e),className:"text-gray-500 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-white/5",children:e?r.jsx(Nt,{size:14}):r.jsx(wt,{size:14})})]}),r.jsxs("div",{className:`flex-1 flex flex-col gap-2.5 relative z-10 transition-all duration-300 ${e?"":"blur-md select-none pointer-events-none"}`,children:[r.jsxs("div",{className:"flex items-center justify-between bg-white/[0.03] rounded-xl px-3 py-2 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-lg bg-green-500/10 flex items-center justify-center",children:r.jsx(ke,{size:12,className:"text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] text-gray-500 font-bold",children:"دولار"}),r.jsxs("p",{className:"text-sm font-black text-white",children:["$",i.monthPaidUSD.toLocaleString()]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[i.remainingUSD>0&&r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-[8px] text-gray-600",children:"متبقي"}),r.jsxs("p",{className:"text-[10px] font-bold text-rose-400",children:["$",i.remainingUSD.toLocaleString()]})]}),i.trendUSD!==0&&r.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[9px] font-bold ${i.trendUSD>=0?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:[i.trendUSD>=0?r.jsx(fe,{size:10}):r.jsx(Ae,{size:10}),Math.abs(i.trendUSD).toFixed(0),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between bg-white/[0.03] rounded-xl px-3 py-2 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-500/10 flex items-center justify-center",children:r.jsx(Pt,{size:12,className:"text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] text-gray-500 font-bold",children:"دينار"}),r.jsxs("p",{className:"text-sm font-black text-white",children:[i.monthPaidIQD.toLocaleString()," ",r.jsx("span",{className:"text-[9px] text-gray-500",children:"د.ع"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[i.remainingIQD>0&&r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-[8px] text-gray-600",children:"متبقي"}),r.jsxs("p",{className:"text-[10px] font-bold text-rose-400",children:[i.remainingIQD.toLocaleString()," د.ع"]})]}),i.trendIQD!==0&&r.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[9px] font-bold ${i.trendIQD>=0?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:[i.trendIQD>=0?r.jsx(fe,{size:10}):r.jsx(Ae,{size:10}),Math.abs(i.trendIQD).toFixed(0),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(qe,{size:11,className:"text-amber-400"}),r.jsxs("span",{className:"text-[10px] text-gray-400",children:[r.jsx("span",{className:"font-black text-white",children:i.monthCount})," حجز"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(ee,{size:11,className:"text-purple-400"}),r.jsxs("span",{className:"text-[10px] text-gray-400",children:[r.jsx("span",{className:"font-black text-white",children:i.totalCount})," كلي"]})]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Ge,{size:11,className:"text-emerald-400"}),r.jsxs("span",{className:"text-[10px] text-gray-400",children:["تحصيل: ",r.jsxs("span",{className:"font-black text-emerald-400",children:[i.collectionRate,"%"]})]})]})]})]})]})},oa=g.memo(ia),la=({bookings:t=[]})=>{const e=t.filter(a=>!(!a.actualSelectionDate||a.status==="Delivered"||a.status==="Cancelled"||a.status==="Archived")).map(a=>{const n=new Date(a.actualSelectionDate),s=new Date(n);s.setDate(s.getDate()+60);const i=s.getTime()-new Date().getTime(),o=Math.ceil(i/(1e3*60*60*24));return{id:a.id,name:`${a.category} (${a.clientName})`,days:o,status:a.status,priority:o<3?"High":o<7?"Medium":"Normal"}}).filter(a=>a.days>=-7&&a.days<=30).sort((a,n)=>a.days-n.days).slice(0,7);return r.jsxs(D,{className:"h-[220px] flex flex-col justify-between",dir:"rtl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-sm font-bold font-tajawal text-gray-800 flex items-center gap-2",children:[r.jsx(kt,{size:16,className:"text-red-500"}),"تسليمات قريبة"]}),e.length>0&&r.jsxs("span",{className:"text-[10px] text-red-500 font-bold bg-red-50 px-2 py-0.5 rounded-full animate-pulse",children:[e.length," مهام"]})]}),r.jsx("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:e.length>0?e.map((a,n)=>r.jsxs("div",{className:"flex flex-col gap-1.5 shrink-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-bold text-gray-700 font-tajawal truncate max-w-[120px]",children:a.name}),r.jsx("span",{className:`text-[10px] font-bold ${a.days<0?"text-red-700":a.days<3?"text-red-600":"text-orange-500"}`,children:a.days<0?`متأخر ${Math.abs(a.days)} يوم`:a.days===0?"اليوم":`${a.days} يوم`})]}),r.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden",children:r.jsx(z.div,{initial:{width:0},animate:{width:a.days<3?"90%":"60%"},transition:{duration:1,delay:n*.1},className:`h-full rounded-full ${a.days<0?"bg-red-700":a.days<3?"bg-red-500":"bg-orange-500"}`})})]},a.id)):r.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:r.jsx("p",{className:"text-xs font-tajawal",children:"لا توجد تسليمات قريبة"})})})]})},ca=({users:t=[],bookings:e=[]})=>{const[a,n]=N.useState(!1),s=N.useMemo(()=>t.map(i=>{const o=e.filter(d=>(d.status==="Delivered"||d.status==="Archived")&&(d.assignedShooter===i.id||d.assignedPhotoEditor===i.id||d.assignedVideoEditor===i.id)).length,c=e.filter(d=>d.status!=="Delivered"&&d.status!=="Archived"&&(d.assignedShooter===i.id||d.assignedPhotoEditor===i.id||d.assignedVideoEditor===i.id)).length,l=e.filter(d=>d.created_by===i.id).length;return{...i,tasksCompleted:o,activeTasks:c,createdTasks:l,trend:"---"}}).sort((i,o)=>o.tasksCompleted+o.createdTasks-(i.tasksCompleted+i.createdTasks)).slice(0,5),[t,e]);return r.jsxs(D,{className:"",children:[r.jsx("button",{onClick:()=>n(!a),className:"w-full py-2 group/header",children:r.jsxs("div",{className:"flex items-center justify-between w-full overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ee,{size:16,className:"text-gray-900 opacity-40 group-hover/header:opacity-100 transition-opacity"}),r.jsx("h3",{className:"text-[12px] font-bold text-gray-800 font-tajawal",children:"أداء الموظفين"})]}),a?r.jsx(Ye,{size:16,className:"text-gray-400"}):r.jsx(Oe,{size:16,className:"text-gray-400"})]})}),a&&r.jsxs("div",{className:"mt-3 space-y-3",children:[s.length>0?s.map((i,o)=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-2xl hover:bg-gray-100 transition-colors cursor-pointer group",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white  flex items-center justify-center overflow-hidden",children:i.avatar?r.jsx("img",{src:i.avatar,className:"w-full h-full object-cover"}):r.jsx("span",{className:"font-bold text-gray-500",children:i.name.charAt(0)})}),o===0&&i.tasksCompleted+i.createdTasks>0&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-amber-400 text-white rounded-full p-0.5 border-2 border-white",children:r.jsx(Ot,{size:8,fill:"currentColor"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[r.jsx("p",{className:"font-bold text-sm text-gray-900 truncate font-tajawal",children:i.name}),i.activeTasks>0&&r.jsxs("span",{className:"text-[9px] font-bold text-gray-400",children:[i.activeTasks," نشط"]})]}),r.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ve,{size:10,className:"text-blue-500"})," ",i.tasksCompleted," منجز"]}),i.createdTasks>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ve,{size:10,className:"text-emerald-500"})," ",i.createdTasks," أنشأ"]})]})]}),r.jsx("div",{className:"text-right opacity-0"})]},i.id)):r.jsx("div",{className:"text-center py-4 text-gray-400 text-xs text-tajawal",children:"لا يوجد نشاط موظفين حالياً"}),r.jsx("div",{className:"pt-1 text-center",children:r.jsx("button",{className:"text-[10px] text-gray-400 hover:text-gray-900 font-tajawal transition-colors",children:"عرض التقرير الكامل"})})]})]})},da=()=>{const[t,e]=N.useState(!1),[a,n]=N.useState(null),[s,i]=N.useState(!1),o=l=>{n(l),e(!0),i(!1)},c=()=>{n(null),e(!1)};return r.jsxs(D,{className:"bg-white/60 dark:bg-[#1a1c22]/60 backdrop-blur-md text-gray-900 dark:text-white overflow-hidden relative min-h-[90px] flex flex-col justify-center",children:[r.jsx(Ze,{mode:"wait",children:a?r.jsxs(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative z-10 flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e(!t),className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white hover:bg-amber-400 transition-colors shadow-lg shadow-amber-500/20 shrink-0",children:t?r.jsx(At,{size:18,fill:"currentColor"}):r.jsx(_t,{size:18,fill:"currentColor",className:"ml-0.5"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xs font-bold font-tajawal",children:["تقرير: ",a]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("button",{onClick:()=>{e(!1),setTimeout(()=>e(!0),100)},className:"text-gray-400 hover:text-white transition-colors",children:r.jsx(Et,{size:12})}),r.jsx("button",{onClick:()=>i(!s),className:`${s?"text-amber-500":"text-gray-400 hover:text-white"} transition-colors`,children:r.jsx(Dt,{size:12,fill:s?"currentColor":"none"})}),r.jsxs("button",{onClick:c,className:"text-green-500 hover:text-green-400 transition-colors flex items-center gap-1 bg-green-500/10 px-1.5 py-0.5 rounded-md",children:[r.jsx(Ge,{size:12}),r.jsx("span",{className:"text-[9px] font-bold font-tajawal",children:"تم"})]})]})]})]}),r.jsx("div",{className:"flex items-center gap-0.5 h-8 pr-2",children:[30,60,40,80,50,70,40,50].map((l,d)=>r.jsx(z.div,{animate:t?{height:[l/2,l,l/2]}:{height:l/2},transition:{repeat:1/0,duration:1,delay:d*.1},className:"w-1 bg-linear-to-t from-amber-500/80 to-amber-200/50 rounded-full",style:{height:`${l}%`}},d))})]},"playback"):r.jsxs(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[r.jsx("h3",{className:"text-xs font-bold font-tajawal text-amber-500",children:"مركز التقارير"}),r.jsx("div",{className:"flex gap-1",children:r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})})]}),r.jsx("div",{className:"flex gap-2",children:[{id:"fin",label:"مالية",icon:ke},{id:"team",label:"فريق",icon:ee},{id:"albums",label:"ألبومات",icon:St}].map(l=>r.jsxs("button",{onClick:()=>o(l.label),className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 hover:border-amber-500/30 transition-all group",children:[r.jsx(l.icon,{size:14,className:"text-gray-400 group-hover:text-amber-500"}),r.jsx("span",{className:"text-[11px] font-bold font-tajawal",children:l.label})]},l.id))})]},"commands")}),r.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-amber-500/10 blur-[50px] rounded-full pointer-events-none"})]})},ua=({bookings:t=[]})=>{const e=t.filter(u=>!u.deletedAt),a=e.length,n=e.filter(u=>u.status==="delivered"||u.status==="completed").length,s=new Set(e.map(u=>u.clientName)).size,i=e.reduce((u,h)=>(u[h.category]=(u[h.category]||0)+1,u),{}),o=u=>u?Math.round(u/a*100)+"%":"0%",c=Object.entries(i).filter(([u])=>u.toLowerCase()==="location").reduce((u,[,h])=>u+h,0),l=a-c,d=[{label:"جلسات سرى",value:o(l),color:"bg-gray-900 text-white"},{label:"حجوزات فيلا",value:o(c),color:"bg-amber-200 text-amber-900"},{label:"الطباعة",value:"---",color:"bg-gray-100 text-gray-600"},{label:"قسم الفوتوشوب",value:"---",color:"bg-gray-100 text-gray-600"},{label:"المالية",value:"---",color:"bg-green-100 text-green-700"}],m=()=>{const[u,h]=N.useState(!0),[j,b]=N.useState(""),f=["فَإِنَّ مَعَ الْعُسْرِ يُسْرًا","لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا","وَاصْبِرْ لِحُكْمِ رَبِّكَ فَإِنَّكَ بِأَعْيُنِنَا","وَفِي السَّمَاءِ رِزْقُكُمْ وَمَا تُوعَدُونَ","وَمَا تَوْفِيقِي إِلَّا بِاللَّهِ ۚ عَلَيْهِ تَوَكَّلْتُ","قُل لَّن يُصِيبَنَا إِلَّا مَا كَتَبَ اللَّهُ لَنَا","رَبِّ اشْرَحْ لِي صَدْرِي * وَيَسِّرْ لِي أَمْرِي","وَأُفَوِّضُ أَمْرِي إِلَى اللَّهِ ۚ إِنَّ اللَّهَ بَصِيرٌ بِالْعِبَادِ","وَلَسَوْفَ يُعْطِيكَ رَبُّكَ فَتَرْضَىٰ","إِنَّ اللَّهَ مَعَ الصَّابِرِينَ","وَقُل رَّبِّ زِدْنِي عِلْمًا","فَاذْكُرُونِي أَذْكُرْكُمْ وَاشْكُرُوا لِي وَلَا تَكْفُرُونِ","وَاللَّهُ يَرْزُقُ مَن يَشَاءُ بِغَيْرِ حِسَابٍ","وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ","إِنَّ رَحْمَتَ اللَّهِ قَرِيبٌ مِّنَ الْمُحْسِنِينَ","فَبَشِّرِ الصَّابِرِينَ","لَا تَحْزَنْ إِنَّ اللَّهَ مَعَنَا","وَتَوَكَّلْ عَلَى الْحَيِّ الَّذِي لَا يَمُوتُ","وَقَالُوا الْحَمْدُ لِلَّهِ الَّذِي أَذْهَبَ عَنَّا الْحَزَنَ","حَسْبِيَ اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ ۖ عَلَيْهِ تَوَكَّلْتُ"],[y,p]=N.useState(!1),[v,x]=N.useState(new Date);return N.useEffect(()=>{const O=f[Math.floor(Math.random()*f.length)];b(O);const P=setTimeout(()=>{h(!1),setTimeout(()=>p(!0),800)},5e3),_=setInterval(()=>{x(new Date)},1e3);return()=>{clearTimeout(P),clearInterval(_)}},[]),r.jsx("div",{className:"flex flex-col items-center justify-center absolute left-1/2 top-0 -translate-x-1/2 h-full w-auto min-w-[300px]",children:r.jsx(Ze,{mode:"wait",children:u?r.jsxs(z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.8},className:"relative",children:[r.jsx("div",{className:"bg-linear-to-r from-amber-500/10 to-transparent p-4 rounded-full blur-xl absolute inset-0"}),r.jsx("h2",{className:"text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-linear-to-r from-amber-600 to-amber-800 font-quran relative z-10 leading-loose py-2 whitespace-nowrap",children:j})]},"verse"):y&&r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1},className:"flex items-center gap-4 bg-white/5 backdrop-blur-md px-6 py-2 rounded-2xl border border-white/10 shadow-xl",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"text-2xl font-black text-gray-800 tracking-wider font-mono",children:[G(v,"hh:mm:ss"),r.jsx("span",{className:"text-sm ml-2 text-amber-600 font-bold uppercase",children:G(v,"a")})]}),r.jsx("div",{className:"text-[10px] uppercase tracking-widest text-gray-500 font-bold mt-0.5",children:G(v,"EEEE, MMMM do")})]})},"clock")})})};return r.jsx("div",{className:"mb-4 px-1 -mt-2 relative",children:r.jsxs("div",{className:"flex items-center justify-between h-14 relative",children:[r.jsx("div",{className:"flex items-center gap-3",children:d.map((u,h)=>r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:u.label}),r.jsx("span",{className:`px-4 py-2 text-xs font-bold rounded-full ${u.color}`,children:u.value})]},h))}),r.jsx(m,{}),r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Tt,{size:16,className:"text-gray-400"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:a})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"عدد الجلسات"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(ve,{size:16,className:"text-gray-400"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:n})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"أعمال منجزة"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(ee,{size:16,className:"text-gray-400"}),r.jsx("p",{className:"text-4xl font-bold text-gray-900",children:s})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"العملاء"})]})]})]})})},xa=({bookings:t=[],onBookingDoubleClick:e})=>{const[a,n]=N.useState(new Date),[s,i]=N.useState(null),o=11,l=20-o+1,d=()=>n(me(a,30)),m=()=>n(me(a,-30)),u=N.useMemo(()=>Array.from({length:7},(f,y)=>me(Zt(),y)),[]),h=N.useMemo(()=>{try{const p=[...(t??[]).filter(x=>(x==null?void 0:x.shootDate)&&De(new Date(x.shootDate),a)).map(x=>{var _,T,B,w;let O=o;if((_=x==null?void 0:x.details)!=null&&_.startTime){const[A,W]=String(x.details.startTime).split(":").map(Number);O=A+W/60}let P="normal";return x!=null&&x.isVIP?P="vip":(T=x==null?void 0:x.details)!=null&&T.isPrivate&&(P="private"),{id:x==null?void 0:x.id,title:`${(x==null?void 0:x.clientName)??"Unknown"} - ${(x==null?void 0:x.title)??""}`,start:O,duration:((B=x==null?void 0:x.details)==null?void 0:B.duration)||2,category:P,emoji:(x==null?void 0:x.category)==="Wedding"?"👑":"📸",paid:(x==null?void 0:x.paidAmount)??0,remaining:((x==null?void 0:x.totalAmount)??0)-((x==null?void 0:x.paidAmount)??0),allowPublish:((w=x==null?void 0:x.details)==null?void 0:w.allowPublishing)??!1,laneIndex:0}})].sort((x,O)=>x.start-O.start),v=[];return p.forEach(x=>{let O=!1;for(let P=0;P<v.length;P++){const _=v[P][v[P].length-1];if(x.start>=_.start+_.duration){v[P].push(x),O=!0;break}}O||v.push([x])}),v.flatMap((x,O)=>x.map(P=>({...P,laneIndex:O})))}catch(f){return console.error("Error processing timeline events",f),i("Failed to load timeline data"),[]}},[t,a]),b=(Math.max(...h.map(f=>f.laneIndex),0)+1)*70;return r.jsxs(D,{noPadding:!0,className:"h-auto min-h-[200px] flex flex-col relative overflow-hidden bg-white/60 dark:bg-[#1a1c22]/60 backdrop-blur-md border-gray-200 dark:border-white/5",dir:"ltr",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 pt-3 pb-2 border-b border-gray-200 dark:border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white font-tajawal",children:G(a,"MMMM yyyy")}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:m,className:"p-1 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:r.jsx(Oe,{className:"rotate-90",size:16})}),r.jsx("button",{onClick:d,className:"p-1 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:r.jsx($t,{size:16})})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:u.map((f,y)=>{const p=De(f,a);return r.jsx("button",{onClick:()=>n(f),className:`px-3 py-1.5 rounded-xl text-xs font-bold ${p?"bg-white text-gray-900":"text-gray-500 hover:text-gray-300"}`,children:G(f,"d")},y)})})]}),s&&r.jsx("div",{className:"bg-rose-600 text-white p-2 text-center font-bold",children:s}),r.jsxs("div",{className:"flex-1 relative mt-4 px-6 overflow-x-auto custom-scrollbar pb-6",children:[r.jsx("div",{className:"flex border-b border-gray-200 dark:border-white/10 pb-2 mb-2 w-full min-w-[600px]",children:Array.from({length:l+1}).map((f,y)=>r.jsxs("div",{className:"flex-1 text-[10px] text-gray-400 dark:text-gray-500 font-mono text-center border-l border-gray-200 dark:border-white/10 first:border-0 pl-1",children:[o+y,":00"]},y))}),r.jsxs("div",{className:"relative w-full min-w-[600px]",style:{height:`${b+20}px`},children:[r.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full",children:Array.from({length:l}).map((f,y)=>r.jsx("div",{className:"flex-1 border-l border-dashed border-gray-700/30 first:border-0"},y))}),h.map((f,y)=>{const p=Math.max(f.duration,2),v=(f.start-o)/l*100,x=p/l*100,O=T=>{const B=T%12||12,w=T%1*60;return`${Math.floor(B)}:${w===0?"00":Math.floor(w)}`},P=`${O(f.start)}-${O(f.start+f.duration)}`,_=()=>f.allowPublish?"bg-gradient-to-r from-emerald-500/30 to-emerald-700/40 border-emerald-500/40 text-emerald-50":f.category==="private"?"bg-gradient-to-r from-rose-500/30 to-rose-700/40 border-rose-500/40 text-rose-50":f.category==="vip"?"bg-gradient-to-r from-amber-400/30 to-amber-600/40 border-amber-500/40 text-amber-50":"bg-gradient-to-r from-blue-500/30 to-blue-700/40 border-blue-500/40 text-blue-50";return r.jsx(z.div,{onDoubleClick:()=>e&&e(t.find(T=>T.id===f.id)),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:y*.1},className:`absolute h-[64px] rounded-2xl border backdrop-blur-md flex items-center px-4 gap-3 overflow-hidden cursor-pointer group z-10 hover:z-50 shadow-lg transition-all duration-300 hover:brightness-125 ${_()}`,style:{left:`${v}%`,width:`${Math.max(x,12)}%`,top:`${f.laneIndex*74}px`},children:r.jsxs("div",{className:"min-w-0 flex-1 flex flex-col justify-center h-full relative z-10 px-0.5",children:[r.jsx("h4",{className:"text-[11px] font-bold truncate font-tajawal text-white mb-0.5 drop-shadow-sm",children:f.title}),r.jsxs("div",{className:"flex items-center justify-between gap-1 overflow-hidden",children:[r.jsx("div",{className:"text-[9px] font-mono font-bold text-white/70 whitespace-nowrap",children:P}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-mono font-bold bg-black/30 px-1 py-0.5 rounded border border-white/5 shrink-0",children:[r.jsxs("span",{className:"text-green-400",children:["$",f.paid]}),f.remaining>0&&r.jsxs("span",{className:"text-rose-400 border-l border-white/20 pl-1.5",children:["-$",f.remaining]})]})]})]})},f.id)})]})]})]})},fa=({onEditBooking:t,onRefresh:e})=>{const[a,n]=N.useState([]),[s,i]=N.useState(!0),[o,c]=N.useState(!0),[l,d]=N.useState(null),m=Xt.getCurrentUser(),u=(m==null?void 0:m.name)||"مستخدم",h=(m==null?void 0:m.roleLabel)||"غير محدد",j=async(p=!1)=>{p||i(!0);try{const v=await xe.getPendingApprovals();n(v)}catch(v){console.error("Error loading pending approvals:",v)}p||i(!1)};N.useEffect(()=>{j();const p=setInterval(()=>j(!0),3e4);return()=>clearInterval(p)},[]);const b=async p=>{d(p);try{await xe.approveBooking(p,u,h),await j(),e==null||e()}catch(v){console.error("Error approving booking:",v)}d(null)},f=async p=>{d(p);try{await xe.rejectBooking(p,u,h),await j(),e==null||e()}catch(v){console.error("Error rejecting booking:",v)}d(null)},y=p=>{t==null||t(p)};return a.length===0&&!s?null:r.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/30 rounded-2xl overflow-hidden",children:[r.jsxs("button",{onClick:()=>c(!o),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-500/20 flex items-center justify-center",children:r.jsx(Ct,{size:20,className:"text-yellow-500"})}),r.jsxs("div",{className:"text-right",children:[r.jsx("h3",{className:"text-white font-bold text-sm",children:"حجوزات بانتظار الموافقة"}),r.jsx("p",{className:"text-gray-400 text-xs",children:s?"جاري التحميل...":`${a.length} حجز معلق`})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[a.length>0&&r.jsx("span",{className:"bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded-full animate-pulse",children:a.length}),o?r.jsx(Ye,{size:20,className:"text-gray-400"}):r.jsx(Oe,{size:20,className:"text-gray-400"})]})]}),o&&r.jsx("div",{className:"border-t border-yellow-500/20",children:s?r.jsxs("div",{className:"p-4 text-center text-gray-400 text-sm",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-yellow-500 border-t-transparent rounded-full mx-auto mb-2"}),"جاري التحميل..."]}):r.jsx("div",{className:"divide-y divide-white/5 max-h-[300px] overflow-y-auto custom-scrollbar",children:a.map(p=>{var v,x;return r.jsx("div",{className:"p-4 hover:bg-white/5 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Mt,{size:14,className:"text-gray-400 shrink-0"}),r.jsx("span",{className:"text-white font-bold text-sm truncate",children:p.clientName})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(qe,{size:12,className:"text-gray-500 shrink-0"}),r.jsxs("span",{className:"text-gray-400 text-xs",children:[p.shootDate," | ",(v=p.details)==null?void 0:v.startTime," -"," ",(x=p.details)==null?void 0:x.endTime]})]}),p.conflictDetails&&r.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-500/10 rounded-lg",children:[r.jsx(Rt,{size:14,className:"text-yellow-500 shrink-0 mt-0.5"}),r.jsx("span",{className:"text-yellow-400 text-xs leading-relaxed",children:p.conflictDetails})]})]}),r.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[r.jsx("button",{onClick:()=>b(p.id),disabled:l===p.id,className:"p-2 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition-colors disabled:opacity-50",title:"موافقة",children:l===p.id?r.jsx("div",{className:"w-4 h-4 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}):r.jsx(It,{size:16})}),r.jsx("button",{onClick:()=>y(p),disabled:l===p.id,className:"p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 transition-colors disabled:opacity-50",title:"تعديل",children:r.jsx(Lt,{size:16})}),r.jsx("button",{onClick:()=>f(p.id),disabled:l===p.id,className:"p-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-colors disabled:opacity-50",title:"رفض",children:r.jsx(zt,{size:16})})]})]})},p.id)})})})]})},wa=({bookings:t,users:e,tasks:a,onToggleTask:n,onLogout:s})=>{const[i,o]=g.useState(null);return r.jsxs("div",{className:"w-full h-full space-y-4 animate-in fade-in duration-300",children:[r.jsx(ua,{bookings:t}),r.jsx(fa,{onEditBooking:c=>o(c),onRefresh:()=>{}}),r.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[r.jsxs("div",{className:"col-span-12 lg:col-span-3 flex flex-col gap-4",children:[r.jsx(Jt,{}),r.jsx(da,{}),r.jsx(ca,{users:e,bookings:t}),r.jsx(la,{bookings:t})]}),r.jsxs("div",{className:"col-span-12 lg:col-span-6 flex flex-col gap-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oa,{bookings:t}),r.jsx(ta,{bookings:t})]}),r.jsx(xa,{bookings:t.filter(c=>c.category!=="Wedding"),onBookingDoubleClick:c=>o(c)}),r.jsx(ra,{users:e})]}),r.jsxs("div",{className:"col-span-12 lg:col-span-3 flex flex-col gap-4",children:[r.jsx(na,{}),r.jsx(sa,{})]})]}),i&&r.jsx(ht,{isOpen:!!i,onClose:()=>o(null),onSave:()=>{},editingBooking:i,readOnly:!0})]})};export{wa as default};
