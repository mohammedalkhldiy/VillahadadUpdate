import{r as d,j as e}from"./vendor-react-Ce27NbrU.js";import{S as f}from"./index-BFvmHygk.js";import{af as p,o as j,aX as y,ae as v,r as N,bn as w,y as k,v as S,w as z,aA as g,bo as C,X as V}from"./vendor-ui-TjLGESBy.js";import{p as c,f as D,a as I}from"./vendor-utils-DKqDJWuS.js";import"./vendor-supabase-CSCOup90.js";const A=({bookings:m})=>{const[l,u]=d.useState(""),[r,b]=d.useState(null),i=d.useMemo(()=>{const t=new Date,x=new Date(t);x.setDate(t.getDate()+7);const n=new Map;return m.forEach(s=>{n.has(s.clientId)||n.set(s.clientId,{id:s.clientId,name:s.clientName,phone:s.clientPhone,email:s.clientEmail,bookingsCount:0,totalSpent:0,lastVisit:s.shootDate,nextVisit:null,isVIP:s.isVIP,isFamous:s.isFamous,tier:"bronze",token:s.client_token||`vh-token-${s.clientId.slice(0,6)}`,bookings:[]});const a=n.get(s.clientId);a.bookingsCount++,a.totalSpent+=s.totalAmount,a.bookings.push(s);const o=c(s.shootDate);o>c(a.lastVisit)&&(a.lastVisit=s.shootDate),o>=t&&o<=x&&(!a.nextVisit||o<c(a.nextVisit))&&(a.nextVisit=s.shootDate)}),Array.from(n.values()).map(s=>(s.totalSpent>3e6?s.tier="gold":s.totalSpent>1e6?s.tier="silver":s.tier="bronze",s)).filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.phone&&s.phone.includes(l)).sort((s,a)=>a.totalSpent-s.totalSpent)},[m,l]),h=d.useMemo(()=>i.filter(t=>t.nextVisit&&(t.tier==="gold"||t.isVIP||t.isFamous)),[i]);return e.jsxs("div",{className:"h-full flex flex-col animate-in fade-in duration-500 font-mono",dir:"rtl",children:[e.jsxs("div",{className:"bg-[#0B0E14]/60 backdrop-blur-3xl border border-cyan-500/20 rounded-[2.5rem] p-4 mb-6 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-cyan-500/10 rounded-2xl text-cyan-400",children:e.jsx(p,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white tracking-tighter uppercase",children:"Ù…Ø­Ø·Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ / Ø¨ÙˆØ§Ø¨Ø© Ø³Ø§Ø±Ø©"}),e.jsxs("p",{className:"text-[10px] text-gray-500 font-mono tracking-widest uppercase",children:["Ø§Ù„Ù‡Ø¯Ù: ",i.length," Ø¹Ù…ÙŠÙ„ Ù…ØªØµÙ„"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-xl",children:[e.jsxs("div",{className:"relative group w-full",children:[e.jsx(j,{className:"absolute right-4 top-3 text-cyan-400/50 group-focus-within:text-cyan-400",size:16}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ...",value:l,onChange:t=>u(t.target.value),className:"w-full bg-black/40 border border-cyan-500/10 rounded-2xl pr-10 pl-4 py-3 text-[10px] font-mono text-cyan-50 focus:border-cyan-500/50 outline-none transition-all shadow-inner"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/5 rounded-2xl text-[10px] font-black hover:bg-white/10 transition-all uppercase tracking-widest text-gray-400 hover:text-white",children:[e.jsx(y,{size:14,className:"text-emerald-500"}),"Ø­Ø§Ù„Ø©_Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©"]})]})]}),h.length>0&&e.jsx("div",{className:"mb-6 mx-2",children:e.jsxs("div",{className:"bg-[#0B0E14] rounded-[1.4rem] p-5 border border-amber-500/20 relative overflow-hidden group hover:border-amber-500/40 transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-linear-to-l from-amber-500 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500 animate-ping"}),e.jsxs("h3",{className:"text-sm font-black text-amber-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(v,{size:14}),"Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…ÙŠÙ† (7 Ø£ÙŠØ§Ù… Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-amber-500/5 border border-amber-500/20 hover:bg-amber-500/10 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20 text-amber-500",children:e.jsx(N,{size:16,fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-white",children:t.name}),e.jsxs("p",{className:"text-[10px] text-amber-400 font-mono",children:["Ù‚Ø§Ø¯Ù… ÙÙŠ: ",t.nextVisit]})]})]},t.id))})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 overflow-y-auto pb-12 no-scrollbar",children:i.map((t,x)=>e.jsxs("div",{className:`bg-[#0B0E14]/60 backdrop-blur-md border rounded-3xl p-5 hover:shadow-[0_0_30px_rgba(0,242,255,0.05)] transition-all group relative overflow-hidden ${t.tier==="gold"?"border-amber-500/40 shadow-[0_0_15px_rgba(245,158,11,0.1)]":t.tier==="silver"?"border-gray-400/30":"border-white/5"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-xl group-hover:scale-110 transition-transform border ${t.tier==="gold"?"bg-linear-to-br from-amber-600 to-amber-900 border-amber-500/50":t.tier==="silver"?"bg-linear-to-br from-gray-500 to-gray-800 border-gray-400/50":"bg-linear-to-br from-gray-800 to-gray-900 border-white/10"}`,children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"font-black text-white text-[13px] truncate uppercase tracking-tighter flex items-center gap-2",children:[t.name,t.tier==="gold"&&e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-500 border border-amber-500/30",children:"GOLD"}),t.tier==="silver"&&e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-gray-400/20 text-gray-300 border border-gray-400/30",children:"SILVER"})]}),e.jsx("p",{className:"text-[9px] text-gray-500 font-mono uppercase tracking-widest",children:t.phone||"No Phone"})]})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{onClick:()=>b(t),className:"p-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg border border-emerald-500/20 hover:bg-emerald-500 hover:text-white transition-all",title:"Ø¹Ø±Ø¶ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„",children:e.jsx(w,{size:12})})})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"p-2.5 bg-black/40 border border-white/5 rounded-xl flex items-center justify-between group/line hover:border-cyan-400/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-gray-400",children:[e.jsx(k,{size:12,className:"text-cyan-400/50"}),e.jsx("span",{className:"uppercase tracking-[0.2em] font-black",children:"Ø§Ù„Ø³Ø¬Ù„"})]}),e.jsxs("span",{className:"text-[10px] text-white font-bold",children:[t.bookingsCount," Ø¬ÙˆÙ„Ø©"]})]}),e.jsxs("div",{className:"p-2.5 bg-black/40 border border-white/5 rounded-xl flex items-center justify-between group/line hover:border-cyan-400/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-gray-400",children:[e.jsx(S,{size:12,className:"text-cyan-400/50"}),e.jsx("span",{className:"uppercase tracking-[0.2em] font-black",children:"Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±"})]}),e.jsx("span",{className:"text-[10px] text-white font-bold",children:D(c(t.lastVisit),"MMM yyyy",{locale:I})})]})]}),e.jsxs("div",{className:"pt-4 border-t border-cyan-500/10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[8px] font-black text-gray-500 uppercase mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø§Ø¦Ø¯"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{size:10,className:t.tier==="gold"?"text-amber-400":"text-cyan-400"}),e.jsx("span",{className:`${t.tier==="gold"?"text-amber-400":"text-cyan-400"} font-black text-[15px] tracking-tighter`,children:t.totalSpent.toLocaleString()})]})]}),e.jsx("button",{className:"p-2.5 bg-cyan-500/10 text-cyan-400 rounded-xl hover:bg-cyan-500 hover:text-black transition-all shadow-[0_0_10px_rgba(0,242,255,0.1)]",onClick:()=>{console.log(`Sharing portal link for ${t.name}`)},children:e.jsx(g,{size:16})})]}),e.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-cyan-400/10 group-hover:h-full transition-all duration-700 pointer-events-none"})]},t.id))}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl",children:[e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-[3rem] overflow-hidden shadow-2xl relative border-8 border-gray-900",children:[e.jsx("div",{className:"absolute top-0 inset-x-0 h-6 bg-black flex justify-center pt-2 z-20",children:e.jsx("div",{className:"w-20 h-4 bg-black rounded-b-xl"})}),e.jsxs("div",{className:"h-[600px] bg-gray-50 flex flex-col pt-8 overflow-y-auto no-scrollbar relative",children:[e.jsxs("div",{className:"px-6 pb-6 pt-4 flex justify-between items-center bg-white sticky top-0 z-10 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-black text-gray-900",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ ",r.name.split(" ")[0]," ðŸ‘‹"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ù„Ø¯ÙŠÙƒ ",r.bookings.length," Ø­Ø¬ÙˆØ²Ø§Øª Ù†Ø´Ø·Ø©"]})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(p,{size:20,className:"text-gray-900"})})]}),e.jsx("div",{className:"p-4 space-y-4",children:r.bookings.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"px-3 py-1 bg-black text-white text-[10px] font-bold rounded-full",children:f[t.status]}),e.jsx("span",{className:"text-xs font-bold text-gray-400",children:t.shootDate})]}),e.jsx("h3",{className:"font-black text-gray-900 mb-1",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[t.totalAmount.toLocaleString()," IQD"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex-1 py-2 bg-gray-50 rounded-xl text-xs font-bold text-gray-900 flex items-center justify-center gap-2",children:[e.jsx(g,{size:12}),"Ù…Ø´Ø§Ø±ÙƒØ©"]}),e.jsxs("button",{className:"flex-1 py-2 bg-black text-white rounded-xl text-xs font-bold flex items-center justify-center gap-2",children:[e.jsx(C,{size:12}),"Ø§Ù„ØªØ°ÙƒØ±Ø©"]})]})]},t.id))}),e.jsx("div",{className:"absolute bottom-6 inset-x-6",children:e.jsx("button",{className:"w-full py-4 bg-black text-white rounded-2xl font-bold shadow-xl",children:"Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ø¬Ø¯ÙŠØ¯"})})]}),e.jsx("button",{onClick:()=>b(null),className:"absolute top-4 right-4 z-50 p-2 bg-white/20 hover:bg-white/40 rounded-full text-white backdrop-blur-md",children:e.jsx(V,{size:20})})]}),e.jsxs("div",{className:"absolute bottom-8 text-center",children:[e.jsx("p",{className:"text-cyan-400 font-mono text-sm mb-2",children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ù†Ø¸ÙˆØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ (Client Portal View)"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Generated via Token: ",r.token]})]})]})]})};export{A as default};
