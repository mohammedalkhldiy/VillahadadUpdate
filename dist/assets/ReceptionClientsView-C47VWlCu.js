import{r as i,j as e}from"./vendor-react-Ce27NbrU.js";import{S as te}from"./ScrollReveal-DKkvXRwD.js";import{d as se,g as ae,f as le,D as re,r as ie,k as ne}from"./index-BFvmHygk.js";import{C as oe}from"./ClientBadge-BDLI63ku.js";import{F as M}from"./FilterBar-D-KgzGOA.js";import{af as E,aJ as de,o as ce,v as Q,y as xe,r as v,aB as $,ae as me,q as he,aL as pe,x as R,$ as ue,aK as ge,a_ as V,w as fe,c as be,P as je,O as we,C as ve,aj as Ne}from"./vendor-ui-TjLGESBy.js";import{s as ye,p as O,c as ke,d as Ce,e as Se,f as Ie,a as De}from"./vendor-utils-DKqDJWuS.js";import"./vendor-supabase-CSCOup90.js";const ze=(n,m)=>{const g=n.replace(/\D/g,""),f=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${m}ØŒ Ù†Ø­Ù† Ù…Ù† ÙÙŠÙ„Ø§ Ø­Ø¯Ø§Ø¯...`;return`https://wa.me/${g}?text=${encodeURIComponent(f)}`},Re=({bookings:n,onUpdateBooking:m,onRebookClient:g})=>{const[f,U]=i.useState(""),h=i.useDeferredValue(f),[b,z]=i.useState(se),[c,N]=i.useState("today"),[_,y]=i.useState(!1),[j,k]=i.useState(null),[B,C]=i.useState(!1),[u,W]=i.useState(null),[q,S]=i.useState(!1),[I,H]=i.useState(1500),J=!0,K=t=>{const s=n.filter(l=>l.clientId===t&&!l.deletedAt).sort((l,o)=>new Date(o.shootDate).getTime()-new Date(l.shootDate).getTime());if(s.length===0)return null;const a=s[0],r=a.client_token;return r?{url:ne(r),booking:a}:null},G=t=>{W(t),C(!0),S(!1)},X=async t=>{try{await navigator.clipboard.writeText(t),S(!0),setTimeout(()=>S(!1),2e3)}catch(s){console.error("Failed to copy:",s)}},Y=(t,s)=>{var o;const a=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${t.name} ðŸ‘‹

Ø¥Ù„ÙŠÙƒ Ø±Ø§Ø¨Ø· Ø¨ÙˆØ§Ø¨Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ:
${s}

ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ø¯ÙŠÙƒ.

ÙÙŠÙ„Ø§ Ø­Ø¯Ø§Ø¯ - Ù„ØªØ¬Ø±Ø¨Ø© ØªØµÙˆÙŠØ± Ù„Ø§ ØªÙÙ†Ø³Ù‰ ðŸ“¸`;let r=((o=t.phone)==null?void 0:o.replace(/\D/g,""))||"";r.startsWith("0")&&(r=r.substring(1)),r.length>0&&!r.startsWith("964")&&(r="964"+r);const l=r?`https://wa.me/${r}?text=${encodeURIComponent(a)}`:`https://wa.me/?text=${encodeURIComponent(a)}`;window.open(l,"_blank")},Z=(t,s,a)=>{var L;if(!j||!m)return;const r=n.filter(p=>p.clientId===j&&!p.deletedAt).sort((p,ee)=>new Date(ee.shootDate).getTime()-new Date(p.shootDate).getTime());if(r.length===0)return;const l=r[0],o=((L=l.details)==null?void 0:L.extraItems)||[],x={id:Date.now().toString(),amount:t,currency:a,description:s};if(l.currency===a)m(l.id,{totalAmount:l.totalAmount+t,paidAmount:l.paidAmount+t,details:{...l.details,extraItems:[...o,x]}});else{const p=l.addOnTotal||0;m(l.id,{addOnTotal:p+t,originalPackagePrice:l.originalPackagePrice||l.totalAmount,details:{...l.details,extraItems:[...o,x]}})}y(!1),k(null)},w=i.useMemo(()=>{const t=new Map;return n.forEach(s=>{var l;t.has(s.clientId)||t.set(s.clientId,{id:s.clientId,name:s.clientName,email:s.clientEmail,phone:s.clientPhone,bookingsCount:0,totalSpent:0,totalSpentUSD:0,totalSpentIQD:0,totalInIQD:0,lastVisit:s.shootDate,notes:[],isFamous:!1,isManualVIP:!1});const a=t.get(s.clientId);a.bookingsCount+=1,s.currency==="USD"?a.totalSpentUSD+=s.totalAmount:a.totalSpentIQD+=s.totalAmount,a.totalSpent+=s.totalAmount;const r=s.exchangeRate||I;s.currency==="USD"?a.totalInIQD+=(s.totalAmount||0)*r:a.totalInIQD+=s.totalAmount||0,s.addOnTotal&&s.addOnTotal>0&&(s.currency==="USD"?(a.totalSpentIQD+=s.addOnTotal,a.totalInIQD+=s.addOnTotal):(a.totalSpentUSD+=s.addOnTotal,a.totalInIQD+=s.addOnTotal*r)),new Date(s.shootDate)>new Date(a.lastVisit)&&(a.lastVisit=s.shootDate),(l=s.details)!=null&&l.notes&&a.notes.push(s.details.notes),s.isFamous&&(a.isFamous=!0),s.isVIP&&(a.isManualVIP=!0)}),Array.from(t.values()).map(s=>{const a=s.totalSpent>2e3||s.isManualVIP||s.name.toLowerCase().includes("vip"),r=s.bookingsCount>1,l=s.bookingsCount===1,o=s.isFamous;return{...s,isVIP:a,isLoyal:r,isNew:l,isFamous:o}})},[n,I]),T=i.useMemo(()=>ae(n),[n]),d=i.useMemo(()=>{h.toLowerCase().replace(/\D/g,"")||h.toLowerCase();let t=w.filter(s=>{var x;if(!h)return!0;const a=s.name.toLowerCase().includes(h.toLowerCase()),r=((x=s.phone)==null?void 0:x.replace(/\D/g,""))||"",l=h.replace(/\D/g,""),o=l.length>0&&r.includes(l);return a||o});return t=le(t,n,b),t},[w,h,b,n]),D=i.useMemo(()=>{const t=ye(),s=n.filter(r=>{if(r.deletedAt)return!1;const l=O(r.shootDate);return c==="today"?ke(l):c==="tomorrow"?Ce(l):c==="week"?Se(l,t,{weekStartsOn:6}):!1}),a=new Map;return s.forEach(r=>{var l;if(!a.has(r.clientId)){const o=w.find(x=>x.id===r.clientId);o&&a.set(r.clientId,{...o,bookingTime:((l=r.details)==null?void 0:l.startTime)||"00:00",bookingTitle:r.title})}}),Array.from(a.values()).sort((r,l)=>r.bookingTime.localeCompare(l.bookingTime))},[n,c,w]),A=i.useMemo(()=>[...d].filter(t=>t.isVIP).sort((t,s)=>s.totalInIQD-t.totalInIQD).slice(0,3),[d]),F=i.useMemo(()=>[...d].filter(t=>t.isLoyal).sort((t,s)=>s.bookingsCount-t.bookingsCount).slice(0,3),[d]),P=i.useMemo(()=>d.filter(t=>t.isFamous).slice(0,3),[d]);return e.jsx(re,{isReception:J,children:e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in duration-300",children:[e.jsxs("div",{className:"bg-[#09090b] rounded-[2.5rem] p-4 border border-white/10 mb-4 shrink-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg text-emerald-400",children:e.jsx(E,{size:24})}),"Ù„ÙˆØ­Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (CRM)"]})}),e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end",children:[e.jsxs("div",{className:"flex items-center gap-1.5 bg-black/40 rounded-xl px-3 py-1.5 border border-white/5",children:[e.jsx(de,{size:12,className:"text-emerald-400 shrink-0"}),e.jsx("span",{className:"text-[9px] font-bold text-gray-500 whitespace-nowrap",children:"$1 ="}),e.jsx("input",{type:"text",inputMode:"numeric",value:I.toLocaleString(),onChange:t=>{const s=parseInt(t.target.value.replace(/[^0-9]/g,""),10);!isNaN(s)&&s>0&&H(s)},className:"w-16 bg-transparent text-xs font-black text-white text-center outline-none"}),e.jsx("span",{className:"text-[9px] font-bold text-gray-500",children:"Ø¯.Ø¹"})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(M,{filter:b,onFilterChange:z,stats:T})}),e.jsxs("div",{className:"relative group/search flex-1 sm:flex-initial min-w-[200px] lg:min-w-[300px]",children:[e.jsx(ce,{className:"absolute right-4 top-2.5 text-gray-500 group-focus-within/search:text-[#F7931E] transition-colors",size:16}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹...",value:f,onChange:t=>U(t.target.value),className:"w-full bg-black/40 border border-white/5 rounded-xl pr-10 pl-4 py-2 text-xs text-white focus:border-[#F7931E]/50 focus:bg-black/60 placeholder-gray-600 transition-all outline-none"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"text-xs font-bold text-gray-500 hidden md:inline",children:[d.length," Ø¹Ù…ÙŠÙ„"]})})]})]}),e.jsx("div",{className:"lg:hidden mt-4",children:e.jsx(M,{filter:b,onFilterChange:z,stats:T})})]}),e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 ${D.length>0?"lg:grid-cols-4":"lg:grid-cols-3"} gap-6 mb-6 w-full items-start`,children:[D.length>0&&e.jsxs("div",{className:"bg-[#18181b] p-4 rounded-3xl border border-white/10 relative overflow-hidden group flex flex-col",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/10 rounded-full blur-[40px] group-hover:bg-blue-500/20 transition-all"}),e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl text-blue-400",children:e.jsx(Q,{size:20})}),e.jsx("h3",{className:"text-white font-bold text-sm",children:"ÙˆØµÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsxs("div",{className:"flex bg-black/40 p-0.5 rounded-lg border border-white/5 gap-0.5 text-[8px] font-bold",children:[e.jsx("button",{onClick:()=>N("today"),className:`px-2 py-1 rounded-md transition-all ${c==="today"?"bg-blue-600/40 text-blue-400":"text-gray-600 hover:text-gray-400"}`,children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("button",{onClick:()=>N("tomorrow"),className:`px-2 py-1 rounded-md transition-all ${c==="tomorrow"?"bg-blue-600/40 text-blue-400":"text-gray-600 hover:text-gray-400"}`,children:"ØºØ¯Ø§Ù‹"}),e.jsx("button",{onClick:()=>N("week"),className:`px-2 py-1 rounded-md transition-all ${c==="week"?"bg-blue-600/40 text-blue-400":"text-gray-600 hover:text-gray-400"}`,children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"})]})]}),e.jsx("div",{className:"space-y-2 relative z-10 max-h-[240px] overflow-y-auto no-scrollbar p-0.5",children:D.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-white/5 border border-white/5 group-hover:border-blue-500/20 transition-all hover:bg-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-600/20 flex items-center justify-center text-xs font-black text-blue-400 shrink-0 border border-blue-500/10",children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[15px] font-bold text-white truncate",children:t.name}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsxs("span",{className:"text-[10px] text-blue-400 font-bold bg-blue-400/10 px-1.5 py-0.5 rounded-md flex items-center gap-1",children:[e.jsx(xe,{size:10})," ",t.bookingTime]})})]})]}),e.jsxs("div",{className:"flex gap-1.5 shrink-0 mr-2 items-center",children:[t.isFamous&&e.jsx("div",{className:"p-1 bg-yellow-500/20 text-yellow-400 rounded-lg border border-yellow-500/20",children:e.jsx(v,{size:12,fill:"currentColor"})}),t.isVIP&&e.jsx("div",{className:"p-1 bg-purple-500/20 text-purple-400 rounded-lg border border-purple-500/20 text-[8px] font-black flex items-center justify-center min-w-[20px]",children:"VIP"}),!t.isNew&&e.jsx("div",{className:"p-1 bg-blue-500/20 text-blue-400 rounded-lg border border-blue-500/20",children:e.jsx($,{size:12})})]})]},s))})]}),e.jsxs("div",{className:"bg-[#18181b] p-4 rounded-3xl border border-white/10 relative overflow-hidden group flex flex-col",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-500/10 rounded-full blur-[40px] group-hover:bg-purple-500/20 transition-all"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-xl text-purple-400 shadow-[0_0_10px_rgba(168,85,247,0.2)]",children:e.jsx(me,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm",children:"ÙƒØ¨Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (VIP)"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Ù‹"})]})]}),e.jsxs("div",{className:"space-y-3 relative z-10 p-1 max-h-[240px] overflow-y-auto no-scrollbar",children:[A.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all group/item",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-xl flex-shrink-0 transition-transform group-hover/item:scale-110 ${s===0?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-[#262626] border border-white/10"}`,children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-bold text-white truncate",children:t.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-0.5",children:[t.bookingsCount," Ø­Ø¬Ø² Ù…ÙƒØªÙ…Ù„"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-black text-purple-400 tracking-tighter",children:t.totalInIQD.toLocaleString()}),e.jsx("span",{className:"text-[9px] text-gray-500 mr-1",children:"Ø¯.Ø¹"})]})]},s)),A.length===0&&e.jsx("p",{className:"text-[10px] text-center text-gray-600 py-4 font-bold",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ VIP Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]}),e.jsxs("div",{className:"bg-[#18181b] p-4 rounded-3xl border border-white/10 relative overflow-hidden group flex flex-col",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-pink-500/10 rounded-full blur-[40px] group-hover:bg-pink-500/20 transition-all"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-pink-500/10 rounded-xl text-pink-400 shadow-[0_0_10px_rgba(236,72,153,0.2)]",children:e.jsx(he,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm",children:"Ø§Ù„Ø£ÙˆÙÙŠØ§Ø¡"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ø§Ù„Ø£ÙƒØ«Ø± ØªÙƒØ±Ø§Ø±Ø§Ù‹"})]})]}),e.jsxs("div",{className:"space-y-3 relative z-10 p-1 max-h-[240px] overflow-y-auto no-scrollbar",children:[F.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all group/item",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-xl flex-shrink-0 transition-transform group-hover/item:scale-110 ${s===0?"bg-gradient-to-r from-pink-500 to-rose-500":"bg-[#262626] border border-white/10"}`,children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-bold text-white truncate",children:t.name}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:"Ø³Ø¬Ù„ Ø­Ø§ÙÙ„ Ø¨Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª"})]})]}),e.jsx("div",{className:"text-right flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-black text-pink-400 bg-pink-500/10 px-2 py-1 rounded-lg",children:t.bookingsCount})})]},s)),F.length===0&&e.jsx("p",{className:"text-[10px] text-center text-gray-600 py-4 font-bold",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø®Ù„ØµÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]}),e.jsxs("div",{className:"bg-[#18181b] p-4 rounded-3xl border border-white/10 relative overflow-hidden group flex flex-col",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-yellow-500/10 rounded-full blur-[40px] group-hover:bg-yellow-500/20 transition-all"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-xl text-yellow-400 shadow-[0_0_10px_rgba(234,179,8,0.2)]",children:e.jsx(v,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm",children:"Ø§Ù„Ù…Ø´Ø§Ù‡ÙŠØ±"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ø£ÙˆØ²Ø§Ù† Ø°Ù‡Ø¨ÙŠØ©"})]})]}),e.jsx("div",{className:"space-y-3 relative z-10 p-1 max-h-[240px] overflow-y-auto no-scrollbar",children:P.length>0?P.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all group/item",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-xl flex-shrink-0 bg-gradient-to-br from-yellow-400 to-amber-600 transition-transform group-hover/item:scale-110",children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-bold text-white truncate",children:t.name}),e.jsxs("p",{className:"text-[10px] text-yellow-500/80 font-bold flex items-center gap-1 mt-0.5",children:[e.jsx($,{size:10})," Ø´Ø®ØµÙŠØ© Ø¨Ø§Ø±Ø²Ø©"]})]})]}),e.jsx("div",{className:"text-right flex items-center gap-2",children:e.jsx(v,{className:"text-yellow-500 shadow-lg",size:16,fill:"currentColor"})})]},s)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 opacity-20",children:[e.jsx(v,{size:32}),e.jsx("p",{className:"text-[9px] mt-2 font-bold",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø®ØµÙŠØ§Øª Ø¨Ø§Ø±Ø²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-y-auto pb-8 custom-scrollbar",children:d.length===0?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center text-gray-600 py-12",children:[e.jsx(E,{size:48,className:"opacity-10 mb-4"}),e.jsx("p",{className:"font-bold",children:"Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©"})]}):d.map((t,s)=>e.jsx(te,{delay:Math.min(s*.05,.3),children:e.jsxs("div",{onClick:()=>{m&&(k(t.id),y(!0))},className:"bg-[#09090b]/40 backdrop-blur-md hover:bg-[#18181b]/60 border border-white/5 hover:border-[#F7931E]/40 rounded-[1.5rem] p-4 transition-all group h-full flex flex-col shadow-lg hover:shadow-[#F7931E]/5 hover:-translate-y-1 duration-300 cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-gray-800 to-gray-900 border border-white/5 flex items-center justify-center text-sm font-black text-white shadow-xl shrink-0 group-hover:scale-110 transition-transform",children:t.name.charAt(0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("h3",{className:"font-bold text-white text-[13px] truncate",children:t.name}),e.jsx(oe,{booking:n.find(a=>a.clientId===t.id)||n[0],allBookings:n,compact:!0})]}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest",children:["ID: ",t.id.slice(0,8)]})]})]}),t.notes.length>0&&e.jsxs("div",{className:"relative group/note",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 text-yellow-500 rounded-xl border border-yellow-500/20 cursor-help",children:e.jsx(pe,{size:16})}),e.jsxs("div",{className:"absolute top-0 right-full mr-3 w-48 bg-gray-900 border border-white/10 p-3 rounded-2xl shadow-2xl opacity-0 group-hover/note:opacity-100 pointer-events-none transition-all z-50 text-[10px] text-gray-300",children:[e.jsxs("p",{className:"font-bold text-yellow-500 mb-2 flex items-center gap-1",children:[e.jsx(R,{size:10})," Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ø®ÙŠØ±Ø©:"]}),e.jsx("p",{className:"leading-relaxed",children:t.notes[t.notes.length-1]})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-400 bg-white/5 px-2 py-1.5 rounded-lg border border-white/5 group-hover:bg-white/10 transition-colors",children:[e.jsx(ue,{size:12,className:"text-gray-500"}),e.jsx("span",{dir:"ltr",className:"font-medium flex-1",children:t.phone||"---"}),e.jsxs("div",{className:"flex items-center gap-1",children:[t.phone&&e.jsx("a",{href:ze(t.phone,t.name),target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-green-500/20 text-green-500 rounded-lg transition-all",onClick:a=>a.stopPropagation(),title:"Ù…Ø±Ø§Ø³Ù„Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",children:e.jsx(ge,{size:14})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),G(t)},className:"p-1.5 hover:bg-amber-500/20 text-amber-500 rounded-lg transition-all",title:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©",children:e.jsx(V,{size:14})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-400 bg-white/5 px-2 py-1.5 rounded-lg border border-white/5 group-hover:bg-white/10 transition-colors",children:[e.jsx(Q,{size:12,className:"text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] text-gray-600 font-bold uppercase",children:"Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©:"}),e.jsx("span",{className:"font-medium text-white/70",children:Ie(O(t.lastVisit),"MMM yyyy",{locale:De})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] text-gray-600 font-bold uppercase tracking-tighter",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:10,className:"text-[#F7931E]"}),e.jsxs("span",{className:"text-[#F7931E] font-black text-sm",children:[t.totalInIQD.toLocaleString()," ",e.jsx("span",{className:"text-[9px] text-gray-500",children:"Ø¯.Ø¹"})]})]}),t.totalSpentUSD>0&&e.jsxs("span",{className:"text-[8px] text-gray-600",children:["($",t.totalSpentUSD.toLocaleString()," + ",t.totalSpentIQD.toLocaleString()," Ø¯.Ø¹)"]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[8px] text-gray-600 font-bold uppercase tracking-tighter",children:"Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØµÙˆÙŠØ±"}),e.jsxs("div",{className:"flex items-center gap-1 text-white/90 font-black text-sm",children:[e.jsx(be,{size:10,className:"text-blue-400"}),e.jsx("span",{children:t.bookingsCount})]})]}),g&&e.jsx("button",{onClick:a=>{a.stopPropagation(),g(t.name,t.phone)},className:"w-9 h-9 rounded-xl bg-[#F7931E]/10 text-[#F7931E] hover:bg-[#F7931E] hover:text-white flex items-center justify-center transition-all hover:scale-110 border border-[#F7931E]/20",title:"Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„",children:e.jsx(je,{size:16})})]})]})},t.id))}),e.jsx(ie,{isOpen:_,onClose:()=>{y(!1),k(null)},onAdd:Z,bookingCurrency:(()=>{if(!j)return"IQD";const t=n.filter(s=>s.clientId===j&&!s.deletedAt).sort((s,a)=>new Date(a.shootDate).getTime()-new Date(s.shootDate).getTime())[0];return(t==null?void 0:t.currency)||"IQD"})()}),B&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100000] p-4",onClick:()=>C(!1),children:e.jsxs("div",{className:"bg-[#1a1c22] rounded-2xl p-6 max-w-md w-full border border-white/10 shadow-2xl",onClick:t=>t.stopPropagation(),dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-500/10 flex items-center justify-center",children:e.jsx(V,{className:"text-amber-500",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©"}),e.jsx("p",{className:"text-sm text-gray-400",children:u.name})]})]}),(()=>{const t=K(u.id);if(!t)return e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(R,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø¬Ø² Ù†Ø´Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„"})]});const{url:s,booking:a}=t;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø£Ø®ÙŠØ±"}),e.jsx("p",{className:"text-sm font-bold text-white",children:a.title}),e.jsx("p",{className:"text-xs text-gray-400",children:a.shootDate})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",readOnly:!0,value:s,className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 pl-12 text-sm text-gray-300 font-mono text-left focus:outline-none"}),e.jsx("button",{onClick:()=>X(s),className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 hover:bg-white/10 rounded-lg transition-all",title:"Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",children:q?e.jsx(we,{size:18,className:"text-green-500"}):e.jsx(ve,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/5 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white p-1 rounded-lg shrink-0",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(s)}`,alt:"QR Code",className:"w-full h-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"Ø±Ù…Ø² QR"}),e.jsx("p",{className:"text-xs text-gray-400",children:"ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² Ù„Ù„ÙˆØµÙˆÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsx("button",{onClick:()=>C(!1),className:"py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white font-bold transition-all",children:"Ø¥ØºÙ„Ø§Ù‚"}),e.jsxs("button",{onClick:()=>Y(u,s),disabled:!u.phone,className:"py-3 bg-[#25D366]/10 hover:bg-[#25D366]/20 text-[#25D366] border border-[#25D366]/20 rounded-xl font-bold transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ne,{size:18}),"Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨"]})]})]})})()]})})]})})};export{Re as default};
